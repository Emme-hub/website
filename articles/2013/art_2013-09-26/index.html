<!DOCTYPE html><html lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=description content="Site indépendant de veille sur la géomatique libre et open source. Articles, tutoriels et revues de presse (#GeoRDP) sur l'information géographique, les SIG, la cartographie, la représentation des données..."><meta name=author content=Geotribu><link href=https://static.geotribu.fr/articles/2013/art_2013-09-26/ rel=canonical><link rel="shortcut icon" href=../../../img/favicon.ico><title>Installer Python et GDAL sous Windows - Geotribu</title><link href=../../../css/bootstrap.min.css rel=stylesheet><link href=../../../css/font-awesome.min.css rel=stylesheet><link href=../../../css/bootstrap-theme.min.css rel=stylesheet><link href=../../../../../../theme/assets/stylesheets/extra.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/wa-mediabox@1.0.1/dist/wa-mediabox.min.css rel=stylesheet><!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.3/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]--><script src=../../../js/jquery-1.10.2.min.js></script><script src=../../../js/bootstrap.min.js></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'None', 'auto');
            ga('send', 'pageview');
        </script></head> <body> <div class="navbar navbar-default navbar-fixed-top" role=navigation> <div class=container> <div class=navbar-header> <button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=../../..>Geotribu</a> </div> <div class="navbar-collapse collapse"> <ul class="nav navbar-nav"> <li> <a href=../../..>&#127968; Accueil</a> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>Revues de presse <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../..>2021</a> </li> <li> <a href=../../..>2020</a> </li> <li> <a href=../../..>2017</a> </li> <li> <a href=../../..>2016</a> </li> <li> <a href=../../..>2015</a> </li> <li> <a href=../../..>2014</a> </li> <li> <a href=../../..>2013</a> </li> <li> <a href=../../..>2012</a> </li> <li> <a href=../../..>2011</a> </li> <li> <a href=../../..>2010</a> </li> </ul> </li> <li class="dropdown active"> <a href=# class=dropdown-toggle data-toggle=dropdown>Articles <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../..>2021</a> </li> <li> <a href=../../..>2020</a> </li> <li> <a href=../../..>2015</a> </li> <li> <a href=../../..>2014</a> </li> <li class=active> <a href=../../..>2013</a> </li> <li> <a href=../../..>2012</a> </li> <li> <a href=../../..>2011</a> </li> <li> <a href=../../..>2010</a> </li> <li> <a href=../../..>2009</a> </li> <li> <a href=../../..>2008</a> </li> </ul> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>Contribuer <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../contribuer/introduction/ >Contribuer à Geotribu</a> </li> <li> <a href=../../../contribuer/requirements/ >Prérequis pour la contribution</a> </li> <li> <a href=../../../contribuer/contribution_guide/ >Guide de contribution</a> </li> <li> <a href=../../..>Editer le contenu</a> </li> <li> <a href=../../..>Générer le site web</a> </li> <li> <a href=../../..>Guides de rédaction</a> </li> <li> <a href=../../..>Archives</a> </li> </ul> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>A propos <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../team/ >L'équipe Geotribu</a> </li> <li> <a href=../../../team/acha/ >Aurélien Chaumet</a> </li> <li> <a href=../../../team/avdc/ >Arnaud Vandecasteele</a> </li> <li> <a href=../../../team/avha/ >Adrien Van Hamme</a> </li> <li> <a href=../../../team/edel/ >Etienne Delay</a> </li> <li> <a href=../../../team/fbor/ >Florian Boret</a> </li> <li> <a href=../../../team/fgob/ >Fabien Goblet</a> </li> <li> <a href=../../../team/gdbo/ >Guillaume de Boyer</a> </li> <li> <a href=../../../team/jmou/ >Julien Moura</a> </li> <li> <a href=../../../team/jory/ >Jérémie Ory</a> </li> <li> <a href=../../../team/jpie/ >Julie Pierson</a> </li> <li> <a href=../../../team/mraj/ >Mathieu Rajerison</a> </li> <li> <a href=../../../team/pver/ >Pierre Vernier</a> </li> <li> <a href=../../../team/rbov/ >Rémi Bovard</a> </li> <li> <a href=../../../team/rqui/ >Rodolphe Quiédeville</a> </li> <li> <a href=../../../team/tgra/ >Thomas Gratier</a> </li> <li> <a href=../../..>Archives</a> </li> </ul> </li> </ul> <ul class="nav navbar-nav navbar-right"> <li> <a href=../art_2013-10-02/ rel=next> <i class="fa fa-arrow-left"></i> Previous </a> </li> <li> <a href=../art_2013-09-22/ rel=prev> Next <i class="fa fa-arrow-right"></i> </a> </li> <li> <a href=https://github.com/geotribu/website/ > geotribu/website </a> </li> </ul> </div> </div> </div> <div class=container> <div class=row> <div class=col-md-3><div class="bs-sidebar hidden-print affix well" role=complementary> <ul class="nav bs-sidenav"> <li class="main active"><a href=#installer-python-et-gdal-sous-windows>Installer Python et GDAL sous Windows</a></li> <li><a href=#le-pourquoi-du-comment>Le pourquoi du comment</a></li> <li><a href=#installer-et-configurer-python>Installer et configurer Python</a></li> <li><a href=#installer-gdalogr>Installer GDAL/OGR</a></li> <li><a href=#le-tunning>Le tunning</a></li> <li><a href=#sources>Sources</a></li> <li><a href=#auteur>Auteur</a></li> </ul> </div></div> <div class=col-md-9 role=main> <h1 id=installer-python-et-gdal-sous-windows>Installer Python et GDAL sous Windows<a class=headerlink href=#installer-python-et-gdal-sous-windows title="Permanent link">#</a></h1> <p>:calendar: Date de publication initiale : 26 septembre 2013</p> <p><strong>Mots-clés :</strong> GDAL | Python | Windows | OGR</p> <p>Déjà un bout de temps sur GéoTribu et presqu'autant d'idées de tutoriels jamais concrétisées pour diverses raisons (manque de temps, flemme, etc.) et finalement je me suis dit que plutôt que de laisser ce blog mort-né, j'allais m'en servir pour y écrire des penses-bête de manipulations que je fais plus ou moins régulièrement pour d'autres et pour lesquelles il est toujours utile d'avoir un guide pas-à-pas sous la main pour éviter d'oublier un détail.</p> <p>J'entame par l'installation sous Windows de Python et GDAL, langage et librairie emblématiques dans la géomatique. L'objectif étant de donner aux débutants coincés sur Windows, de quoi accéder aux nombreux tutoriels de <a href=http://geotribu.net/search/node/python>GéoTribu</a> ou d'ailleurs, par exemple ceux du <a href=http://www.portailsig.org/search/node/python>PortailSIG</a>.</p> <hr> <p>Niveau : débutant<br> Pré-requis : aucun :wink:</p> <p><img alt="logo Python" src=https://cdn.geotribu.fr/img/logos-icones/programmation/python.png title="logo Python"> <img alt="logo GDAL" src=https://cdn.geotribu.fr/img/logos-icones/logiciels_librairies/gdal.png title="logo GDAL"></p> <p>Pour se rappeler d'où vient le nom du langage :</p> <iframe width=560 height=315 src=https://www.youtube-nocookie.com/embed/3g-g2yYR6Jk frameborder=0 allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> <h2 id=le-pourquoi-du-comment>Le pourquoi du comment<a class=headerlink href=#le-pourquoi-du-comment title="Permanent link">#</a></h2> <p>Sous <strong>Windows</strong> parce-que n'en déplaise aux manchots, l'essentiel des êtres humains ne parle pas machine et que la grande majorité des professionnels utilise Windows et un logiciel SIG fonctionnant uniquement sur ce système (ESRI, MapInfo, GéoConcept, ...). D'ailleurs, même pour QGIS et gvSIG, je pense qu'il y a davantage d'utilisateurs sous Windows également.</p> <p>D'autre part, si Python est aisément installable, il est toujours bon de peaufiner les détails pour travailler confortablement par la suite ; sans parler de GDAL dont l'utilisation indépendante (c'est-à-dire hors des packages du type OSGeo4W) est tout sauf une sinécure. C'est d'ailleurs un sujet récurrent sur <a href=http://gis.stackexchange.com/questions/2276/how-to-install-gdal-with-python-on-windows>GIS StackExchange</a> et il est donc temps de donner leur chance aux anglophobes.</p> <p>Il est certes facile de passer par OSGeo4W mais ce n'est pas vraiment intégré au système d'exploitation ni adapté aux usages d'un utilisateur moyen de Windows.</p> <h2 id=installer-et-configurer-python>Installer et configurer Python<a class=headerlink href=#installer-et-configurer-python title="Permanent link">#</a></h2> <p>Certes, c'est la base et ce n'est vraiment pas compliqué, mais il s'agit de pas manquer d'avoir de bonnes bases.</p> <h3 id=telecharger>Télécharger<a class=headerlink href=#telecharger title="Permanent link">#</a></h3> <p>La <a href=http://www.python.org/download/releases/2.7.5/ >dernière version de la série des 2.7.x</a> (à ce jour la 2.7.5 donc) et en 32 bits. C'est une recommandation personnelle. D'une part parce-que beaucoup de librairies ne sont toujours pas portées en 3.x et d'autre part pour des soucis de stabilité ou de compatibilité avec certaines dépendances (<code>arcpy</code> notamment). L'installation en mode administrateur et complète se déroule normalement sans souci.</p> <h3 id=parametrer-les-variables-de-lenvironnement-windows>Paramétrer les variables de l'environnement Windows<a class=headerlink href=#parametrer-les-variables-de-lenvironnement-windows title="Permanent link">#</a></h3> <p>Objectifs :</p> <ul> <li>qu'il (Windows) comprenne que les fichiers python (.py et .pyc) sont des programmes à exécuter ;</li> <li>pouvoir travailler directement avec la console Windows ;</li> <li>indiquer au système où se trouvent les dépendances et librairies quand elles sont appelées par un programme Python.</li> </ul> <p>Assurez-vous donc d’avoir bien <code>c:\Python27;c:\Python27\Scripts;</code> à la fin de votre <em>System PATH</em>, auquel on accède via : Panneau de Configuration &gt;&gt; Système &gt;&gt; Paramètres systèmes avancés &gt;&gt; Variables d'environnement. Si vous ne savez pas faire, voici <a href=https://cdn.geotribu.fr/img/articles-blog-rdp/logiciels/Python-GDAL-Windows/Axx_VariablesEnvironnement_0.jpg>une capture d'écran</a> ou un <a href=http://sametmax.com/ajouter-un-chemin-a-la-variable-denvironnement-path-sous-windows/ >lien explicatif</a>).</p> <p><img alt="PATH Windows : Python Scripts" src=https://cdn.geotribu.fr/img/articles-blog-rdp/logiciels/Python-GDAL-Windows/PATH_Python.jpg title="PATH Windows : Python Scripts"></p> <h3 id=pour-les-puristes>Pour les puristes<a class=headerlink href=#pour-les-puristes title="Permanent link">#</a></h3> <p>Redémarrer un coup, ça fait jamais de mal :wink:.</p> <hr> <h2 id=installer-gdalogr>Installer GDAL/OGR<a class=headerlink href=#installer-gdalogr title="Permanent link">#</a></h2> <p>Il y a <a href=http://gdal.gloobe.org/install.html#windows>plusieurs façons d'installer GDAL/OGR</a> mais celle-ci est la plus "propre" selon moi, la plus adaptée à un usage avec Python et Windows et qui permet surtout de s'assurer de profiter de toutes les possibilités offertes par le couteau-suisse.</p> <p>Sinon vous pouvez également vous tourner vers les <a href=http://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal>packages de Christoph Gohlke</a>, que je recommande d'ailleurs pour installer d'autres librairies Python.</p> <h3 id=dis-moi-quel-compilateur-tu-as-et-je-te-dirai-quelle-version-telecharger>Dis-moi quel compilateur tu as et je te dirai quelle version télécharger<a class=headerlink href=#dis-moi-quel-compilateur-tu-as-et-je-te-dirai-quelle-version-telecharger title="Permanent link">#</a></h3> <p>La façon la plus simple étant de lancer l'interpréteur fourni avec Python, IDLE de son joli nom :</p> <p><img alt src=https://cdn.geotribu.fr/img/articles-blog-rdp/logiciels/Python-GDAL-Windows/MSVC_Version.jpg></p> <p>Sachez que si vous le souhaitez, vous pouvez disposer gratuitement de la dernière version des librairies C#/C++ sur Windows en installant <a href=http://www.microsoft.com/visualstudio/fra/downloads>Visual Studio Express</a>.</p> <h3 id=choisir-ses-installeurs>Choisir ses installeurs<a class=headerlink href=#choisir-ses-installeurs title="Permanent link">#</a></h3> <p>La librairie est régulièrement mise à jour et doit-être compilée mais heureusement pour nous, il y a des gens qui font un excellent travail de vulgarisation du processus et qui mettent à jour le fruit de leurs efforts.</p> <p>Saluons donc ici <a href=http://szekerest.blogspot.fr/ >Tamas Szekeres de GIS Internals</a> grâce à qui nous disposons d'installeurs stables et à jour : <a href=http://www.gisinternals.com/sdk/ >http://www.gisinternals.com/sdk/</a>.</p> <p>Dans la section <code>GDAL and MapServer latest release versions</code>, cliquez sur la ligne correspondant aux caractéristiques de votre système, mises en évidence dans le point précédent. Dans mon cas, il s'agit donc de <code>MSVC2008 (Win32)</code>.</p> <h3 id=installer-dans-le-bon-ordre>Installer dans le bon ordre<a class=headerlink href=#installer-dans-le-bon-ordre title="Permanent link">#</a></h3> <p>Comme sur la capture :</p> <ol> <li>Les fichiers du coeur de GDAL/OGR</li> <li>Les headers Python</li> <li>Les modules optionnels qui pourraient vous intéresser :<ul> <li>l'un pour pouvoir accéder aux FileGDB d'ESRI,</li> <li>l'autre pour les fichiers ECW ou encore les MrSID (<a href=http://gdal.gloobe.org/gdal/formats/mrsid.html>format d'images compressées</a>).</li> <li>D'autres dépendent de licences propriétaires, comme celui d'Oracle.</li> </ul> </li> </ol> <p><img alt="Capture d'écran de la partie téléchargement des installeurs sur GIS Internals" src=https://cdn.geotribu.fr/img/articles-blog-rdp/logiciels/Python-GDAL-Windows/GISInternalsSDK_GDALdownloads_capture.jpg title="Capture d'écran de la partie téléchargement des installeurs sur GIS Internals"></p> <h3 id=ajouter-gdal-aux-variables-denvironnement>Ajouter GDAL aux variables d'environnement<a class=headerlink href=#ajouter-gdal-aux-variables-denvironnement title="Permanent link">#</a></h3> <p>Comme expliqué plus haut pour Python, ajouter à la fin du Path (donc après <code>c:\Python27\Scripts;</code> normalement) le chemin vers l'installation de GDAL (a priori : <code>C:\Program Files (x86)\GDAL</code>) :</p> <p><img alt="PATH Windows : dossier d'installation de GDAL" src=https://cdn.geotribu.fr/img/articles-blog-rdp/logiciels/Python-GDAL-Windows/PATH_GDAL.jpg title="PATH Windows : dossier d'installation de GDAL"></p> <p>Attention, certains utilisateurs ont fait remonter des erreurs du type <code>DLL load failed</code> et <a href=https://stackoverflow.com/a/10010835>recommandent</a> de placer le chemin vers GDAL au début de la variable <code>Path</code>.</p> <p>Si vous souhaitez également pouvoir utiliser des outils logiciels développés en Java (comme <a href=http://fr.talend.com/products/data-integration>Talend Data Integration</a> par exemple), vous pouvez rajouter <code>C:\Program Files (x86)\GDAL\java</code> à la suite du Path.</p> <h3 id=creer-une-nouvelle-variable-systeme-pour-les-donnees-de-gdal>Créer une nouvelle variable système pour les données de GDAL<a class=headerlink href=#creer-une-nouvelle-variable-systeme-pour-les-donnees-de-gdal title="Permanent link">#</a></h3> <p>Toujours dans la fenêtre des variables d'environnement, cliquez sur "Nouvelle" pour affecter le chemin des données de GDAL, <code>C:\Program Files (x86)\GDAL\gdal-data</code> en théorie, à <code>GDAL_DATA</code> :</p> <p><img alt="PATH Windows : dossier des données GDAL" src=https://cdn.geotribu.fr/img/articles-blog-rdp/logiciels/Python-GDAL-Windows/Variable_%20GDAL_Data.jpg title="PATH Windows : dossier des données GDAL"></p> <h3 id=repeter-pour-les-modules-de-gdal-et-le-dossier-des-projections>Répéter pour les modules de GDAL et le dossier des projections<a class=headerlink href=#repeter-pour-les-modules-de-gdal-et-le-dossier-des-projections title="Permanent link">#</a></h3> <p><img alt="PATH Windows : dossier d'installation des plugins de GDAL" src=https://cdn.geotribu.fr/img/articles-blog-rdp/logiciels/Python-GDAL-Windows/Variable_GDAL_Driver.jpg title="PATH Windows : dossier d'installation des plugins de GDAL"></p> <p><img alt="Ajout de la variable PROJ_LIB" src=https://cdn.geotribu.fr/img/articles-blog-rdp/logiciels/Python-GDAL-Windows/Variable_GDAL_PROJ_LIB.jpg title="Ajout de la variable PROJ_LIB"> </p> <h3 id=tester-et-apprecier>Tester et apprécier<a class=headerlink href=#tester-et-apprecier title="Permanent link">#</a></h3> <p>Après avoir redémarré (on n'est jamais trop prudent sous Windows...), ouvrez un terminal Windows (Démarrer &gt;&gt; Exécuter &gt;&gt; cmd) et vérifiez que vous obtenez quelque chose qui ressemble à ça :</p> <p><img alt="Résultat dans la console Windows" src=https://cdn.geotribu.fr/img/articles-blog-rdp/logiciels/Python-GDAL-Windows/ResultatInstallation_PythonGDAL.jpg title="Résultat dans la console Windows"></p> <p>On peut également tester son installation du côté de l'exécution d'un script et vérifier au passage les pilotes disponibles sur sa machine (<a href=https://github.com/Guts/Metadator/blob/master/test/test_ogr_DriversDispos.py>ce script est également sur GitHub</a>) :</p> <div class=highlight><pre><span></span><code><span class=c1>#-*-coding: utf-8-*-</span>
<span class=c1>#!/usr/bin/env python</span>
<span class=c1>#-------------------------------------------------------------------------------</span>
<span class=c1># Name:         OGR Drivers&#39;availability</span>
<span class=c1># Purpose:      Class to test if GDAL/OGR and their Python bindings are installed</span>
<span class=c1>#               and which drivers are installed. Could be imported as a submodule.</span>
<span class=c1>#</span>
<span class=c1># Author:        Julien Moura (https://github.com/Guts)</span>
<span class=c1># PyVersion:    2.7.x</span>
<span class=c1># Created:       24/06/2013</span>
<span class=c1># Updated:      16/07/2013</span>
<span class=c1># Licence:        GPL 3</span>
<span class=c1># Credits:        http://pcjericks.github.io/py-gdalogr-cookbook</span>
<span class=c1>#-------------------------------------------------------------------------------</span>

<span class=c1>################################################################################</span>
<span class=c1>######## Libraries import #########</span>
<span class=c1>###################################</span>

<span class=c1># 3rd party libraries</span>
<span class=k>try</span><span class=p>:</span>
  <span class=kn>from</span> <span class=nn>osgeo</span> <span class=kn>import</span> <span class=n>ogr</span>
  <span class=nb>print</span> <span class=sa>u</span><span class=s2>&quot;Import des modules réussi. tout semble OK : en avant !!</span><span class=se>\n</span><span class=s2>&quot;</span>
<span class=k>except</span><span class=p>:</span>
  <span class=nb>print</span> <span class=sa>u</span><span class=s2>&quot;L&#39;import des modules a échoué. &quot;</span> \
    <span class=o>+</span> <span class=s2>&quot;Merci de vérifier votre installation de GDAL/OGR.</span><span class=se>\n\n</span><span class=s2>&quot;</span>


<span class=c1>################################################################################</span>
<span class=c1>############# Classes #############</span>
<span class=c1>###################################</span>

<span class=k>class</span> <span class=nc>OGR_DriversCheck</span><span class=p>:</span>
    <span class=sd>&quot;&quot;&quot; Main class &quot;&quot;&quot;</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=sd>&quot;&quot;&quot; &quot;&quot;&quot;</span>

    <span class=k>def</span> <span class=nf>check_shp</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=sa>u</span><span class=sd>&quot;&quot;&quot; Vérifie que le pilote pour les shapes est disponible&quot;&quot;&quot;</span>
        <span class=n>driverName</span> <span class=o>=</span> <span class=s2>&quot;ESRI Shapefile&quot;</span>
        <span class=n>driver</span> <span class=o>=</span> <span class=n>ogr</span><span class=o>.</span><span class=n>GetDriverByName</span><span class=p>(</span> <span class=n>driverName</span> <span class=p>)</span>
        <span class=k>if</span> <span class=n>driver</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=nb>print</span> <span class=sa>u</span><span class=s2>&quot;</span><span class=si>%s</span><span class=s2> : pilote indisponible.&quot;</span> <span class=o>%</span> <span class=n>driverName</span>
            <span class=k>return</span> <span class=mi>0</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=nb>print</span>  <span class=sa>u</span><span class=s2>&quot;</span><span class=si>%s</span><span class=s2> : pilote disponible.&quot;</span> <span class=o>%</span> <span class=n>driverName</span>
            <span class=k>return</span> <span class=mi>1</span>

    <span class=k>def</span> <span class=nf>check_pg</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=sa>u</span><span class=sd>&quot;&quot;&quot;  Vérifie que le pilote pour PostgreSQL/PostGIS est disponible &quot;&quot;&quot;</span>
        <span class=n>driverName</span> <span class=o>=</span> <span class=s2>&quot;PostgreSQL&quot;</span>
        <span class=n>driver</span> <span class=o>=</span> <span class=n>ogr</span><span class=o>.</span><span class=n>GetDriverByName</span><span class=p>(</span> <span class=n>driverName</span> <span class=p>)</span>
        <span class=k>if</span> <span class=n>driver</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=nb>print</span> <span class=sa>u</span><span class=s2>&quot;</span><span class=si>%s</span><span class=s2> : pilote indisponible&quot;</span> <span class=o>%</span> <span class=n>driverName</span>
            <span class=k>return</span> <span class=mi>0</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=nb>print</span>  <span class=sa>u</span><span class=s2>&quot;</span><span class=si>%s</span><span class=s2> : pilote disponible.&quot;</span> <span class=o>%</span> <span class=n>driverName</span>
            <span class=k>return</span> <span class=mi>1</span>

    <span class=k>def</span> <span class=nf>check_gdb</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=sa>u</span><span class=sd>&quot;&quot;&quot; Vérifie que le pilote pour les FileGDB (ESRI) est disponible &quot;&quot;&quot;</span>
        <span class=n>driverName</span> <span class=o>=</span> <span class=s2>&quot;FileGDB&quot;</span>
        <span class=n>driver</span> <span class=o>=</span> <span class=n>ogr</span><span class=o>.</span><span class=n>GetDriverByName</span><span class=p>(</span> <span class=n>driverName</span> <span class=p>)</span>
        <span class=k>if</span> <span class=n>driver</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=nb>print</span> <span class=sa>u</span><span class=s2>&quot;</span><span class=si>%s</span><span class=s2> : pilote indisponible&quot;</span> <span class=o>%</span> <span class=n>driverName</span>
            <span class=k>return</span> <span class=mi>0</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=nb>print</span>  <span class=sa>u</span><span class=s2>&quot;</span><span class=si>%s</span><span class=s2> : pilote disponible.&quot;</span> <span class=o>%</span> <span class=n>driverName</span>
            <span class=k>return</span> <span class=mi>1</span>

    <span class=k>def</span> <span class=nf>list_drivers</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=sa>u</span><span class=sd>&quot;&quot;&quot; Renvoie une liste alphabétique des pilotes disponibles &quot;&quot;&quot;</span>
        <span class=n>cnt</span> <span class=o>=</span> <span class=n>ogr</span><span class=o>.</span><span class=n>GetDriverCount</span><span class=p>()</span>  <span class=c1># nombre de pilotes disponibles</span>
        <span class=n>driversList</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>cnt</span><span class=p>):</span>
            <span class=n>driver</span> <span class=o>=</span> <span class=n>ogr</span><span class=o>.</span><span class=n>GetDriver</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
            <span class=n>driverName</span> <span class=o>=</span> <span class=n>driver</span><span class=o>.</span><span class=n>GetName</span><span class=p>()</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>driverName</span> <span class=ow>in</span> <span class=n>driversList</span><span class=p>:</span>
                <span class=n>driversList</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>driverName</span><span class=p>)</span>
        <span class=c1># end of function</span>
        <span class=k>return</span> <span class=n>driversList</span>

<span class=c1>################################################################################</span>
<span class=c1>##### Stand alone execution #######</span>
<span class=c1>###################################</span>

<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
    <span class=sd>&quot;&quot;&quot; Paramètres pour une utilisation en script &quot;&quot;&quot;</span>
    <span class=n>ogr_check</span> <span class=o>=</span> <span class=n>OGR_DriversCheck</span><span class=p>()</span>
    <span class=n>ogr_check</span><span class=o>.</span><span class=n>check_shp</span><span class=p>()</span>
    <span class=n>ogr_check</span><span class=o>.</span><span class=n>check_pg</span><span class=p>()</span>
    <span class=n>ogr_check</span><span class=o>.</span><span class=n>check_gdb</span><span class=p>()</span>
    <span class=nb>print</span> <span class=n>ogr_check</span><span class=o>.</span><span class=n>list_drivers</span><span class=p>()</span>
</code></pre></div> <p>Qui donne ceci sur ma propre installation (PostgreSQL n'est pas installé) :</p> <div class=highlight><pre><span></span><code>Import des modules réussi. tout semble OK : en avant !!
ESRI Shapefile : pilote disponible.
PostgreSQL : pilote indisponible.
FileGDB : pilote disponible.
[&#39;FileGDB&#39;, &#39;ESRI Shapefile&#39;, &#39;MapInfo File&#39;, &#39;UK .NTF&#39;, &#39;SDTS&#39;, &#39;TIGER&#39;, &#39;S57&#39;, &#39;DGN&#39;, &#39;VRT&#39;, &#39;REC&#39;, &#39;Memory&#39;, &#39;BNA&#39;, &#39;CSV&#39;, &#39;NAS&#39;, &#39;GML&#39;, &#39;GPX&#39;, &#39;KML&#39;, &#39;GeoJSON&#39;, &#39;GMT&#39;, &#39;SQLite&#39;, &#39;ODBC&#39;, &#39;PGeo&#39;, &#39;MSSQLSpatial&#39;, &#39;PCIDSK&#39;, &#39;XPlane&#39;, &#39;AVCBin&#39;, &#39;AVCE00&#39;, &#39;DXF&#39;, &#39;Geoconcept&#39;, &#39;GeoRSS&#39;, &#39;GPSTrackMaker&#39;, &#39;VFK&#39;, &#39;PGDump&#39;, &#39;OSM&#39;, &#39;GPSBabel&#39;, &#39;SUA&#39;, &#39;OpenAir&#39;, &#39;PDS&#39;, &#39;WFS&#39;, &#39;HTF&#39;, &#39;AeronavFAA&#39;, &#39;Geomedia&#39;, &#39;EDIGEO&#39;, &#39;GFT&#39;, &#39;SVG&#39;, &#39;CouchDB&#39;, &#39;Idrisi&#39;, &#39;ARCGEN&#39;, &#39;SEGUKOOA&#39;, &#39;SEGY&#39;, &#39;XLS&#39;, &#39;ODS&#39;, &#39;XLSX&#39;, &#39;ElasticSearch&#39;, &#39;PDF&#39;]
</code></pre></div> <hr> <h2 id=le-tunning>Le tunning<a class=headerlink href=#le-tunning title="Permanent link">#</a></h2> <p>Histoire de commencer avec le plus de confort de travail possible, voici quelques conseils supplémentaires en vrac :</p> <h3 id=dautres-librairies-que-lon-retrouve-tres-souvent-dans-lunivers-geomatique>D'autres librairies que l'on retrouve très souvent dans l'univers géomatique<a class=headerlink href=#dautres-librairies-que-lon-retrouve-tres-souvent-dans-lunivers-geomatique title="Permanent link">#</a></h3> <ul> <li><a href=https://pypi.python.org/pypi/xlwt>xlwt</a>/<a href=https://pypi.python.org/pypi/xlrd>xlrd</a>, écriture/lecture de fichiers Excel entre autres ;</li> <li>les libraires scientifiques <a href=http://www.lfd.uci.edu/~gohlke/pythonlibs/#scipy>scipy</a> et <a href=http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy>numpy</a></li> <li><a href=http://www.lfd.uci.edu/~gohlke/pythonlibs/#pywin32>PyWin32</a> pour communiquer avec les APIs Windows</li> <li><a href=http://www.lfd.uci.edu/~gohlke/pythonlibs/#matplotlib>matplotlib</a> et <a href=http://www.lfd.uci.edu/~gohlke/pythonlibs/#basemap>basemap</a> pour les graphiques de données</li> <li><a href=http://www.lfd.uci.edu/~gohlke/pythonlibs/#pyproj>PyProj</a> pour un accès à PROJ.4</li> <li><a href=http://www.lfd.uci.edu/~gohlke/pythonlibs/#psycopg>Psycopg</a> pour PostgreSQL</li> <li><a href=http://www.lfd.uci.edu/~gohlke/pythonlibs/#shapely>Shapely</a> pour la manipulation facilitée des vecteurs</li> <li><a href=http://www.lfd.uci.edu/~gohlke/pythonlibs/#fiona>Fiona</a> qui rend GDAL/OGR à la fois plus Pythonnesque et surtout plus humain</li> <li><a href=http://www.lfd.uci.edu/~gohlke/pythonlibs/#python-dateutil>DateUtil</a></li> <li><a href=http://www.lfd.uci.edu/~gohlke/pythonlibs/#pillow>Pillow</a></li> </ul> <h3 id=autres-facons-dinstaller>Autres façons d'installer<a class=headerlink href=#autres-facons-dinstaller title="Permanent link">#</a></h3> <ul> <li>Quand un installeur Windows n'est pas disponible, pas de panique, les méthodes classiques de Python (<code>easy_install</code>, <code>pip</code>, <code>setup.py</code>) sont très simples à utiliser (mais sans inscription au registre Windows et donc non désinstallables via le panneau de configuration).</li> </ul> <p>Sur le sujet, je recommande l'excellent tutoriel de Martin Laloux : <a href=http://www.portailsig.org/content/python-pour-les-sigistes-comment-installer-un-module-externe-geojson-shapely-ou-gdalogr-par->Python pour les sigistes</a>.</p> <h3 id=un-vrai-terminal>Un vrai terminal<a class=headerlink href=#un-vrai-terminal title="Permanent link">#</a></h3> <p><a href=http://sourceforge.net/projects/console/ >Console2</a>. Si vous prenez le temps de le configurer correctement, comme détaillé dans l'article de Sam&amp;Max cité dans les sources, ce petit utilitaire apporte un sacré paquet d'avantages, notamment les commandes <a href=http://www.xavierdupre.fr/blog/2013-05-10_nojs.html>pip (installation et mise à jour facilitées des librairies)</a>.</p> <h3 id=un-editeur-de-texte-sympa>Un éditeur de texte sympa<a class=headerlink href=#un-editeur-de-texte-sympa title="Permanent link">#</a></h3> <p><a href=http://notepad-plus-plus.org/fr/ >Notepad++</a> (polyvalent et généraliste) et <a href=https://code.google.com/p/pyscripter/ >PyScripter</a> (dédié presque uniquement à Python) sont deux bonnes options. <a href=http://www.sublimetext.com/ >Sublime Text</a> ou <a href=http://www.jetbrains.com/pycharm/ >PyCharm</a> si vous avez besoin d'un vrai logiciel de développement.</p> <h3 id=un-gestionnaire-de-version>Un gestionnaire de version<a class=headerlink href=#un-gestionnaire-de-version title="Permanent link">#</a></h3> <p>Comme <a href=https://windows.github.com/ >GitHub for Windows</a> par exemple.</p> <hr> <h2 id=sources>Sources<a class=headerlink href=#sources title="Permanent link">#</a></h2> <ul> <li>Le tutoriel pour GDAL/OGR en anglais sur <a href=http://cartometric.com/blog/2011/10/17/install-gdal-on-windows/ >Cartometric</a></li> <li>L'article pour Python de <a href=http://sametmax.com/programmer-confortablement-en-python-sous-windows/ >Sam&amp;Max</a></li> <li>Les <a href=https://pcjericks.github.io/py-gdalogr-cookbook/layers.html>recettes sur GDAL/OGR</a></li> </ul> <hr> <h2 id=auteur>Auteur<a class=headerlink href=#auteur title="Permanent link">#</a></h2> <p><img alt="Portait de Julien Moura" class=img-rdp-news-thumb src=https://cdn.geotribu.fr/img/internal/contributeurs/jmou.jpg> <strong>Julien Moura</strong></p> <p>Géographe qui s'est laissé gagner peu à peu par le côté géomatique de la Force. Intéressé par de nombreuses thématiques liées à l'urbain (ségrégation, environnement, risque et vulnérabilité, etc), j'aime bien l'idée de formaliser les pensées en les modélisant et en les automatisant au possible. A ce jeu là, les outils informatiques s'avèrent indispensables, en particulier Python et Javascript.</p></div> </div> </div> <hr> <footer class=container> <center><span class=copyleft>&copy;</span> Geotribu</center> <center>Documentation built with <a href=http://www.mkdocs.org>MkDocs</a> and <a href=http://kristopolous.github.io/BOOTSTRA.386>BOOTSTRA.386</a>.</center> </footer> <script src=../../../../../../theme/assets/javascripts/extra.js></script> <script src=https://cdn.jsdelivr.net/npm/wa-mediabox@1.0.1/dist/wa-mediabox.min.js></script> <script src=https://unpkg.com/mermaid@8.6.4/dist/mermaid.min.js></script> <script src=../../../../../../search/main.js></script> </body> </html>