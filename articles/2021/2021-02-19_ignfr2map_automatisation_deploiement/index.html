<!DOCTYPE html><html lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=description content="Site indépendant de veille sur la géomatique libre et open source. Articles, tutoriels et revues de presse (#GeoRDP) sur l'information géographique, les SIG, la cartographie, la représentation des données..."><meta name=author content=Geotribu><link href=https://static.geotribu.fr/articles/2021/2021-02-19_ignfr2map_automatisation_deploiement/ rel=canonical><link rel="shortcut icon" href=../../../img/favicon.ico><title>ign2map : automatisation et déploiement - Geotribu</title><link href=../../../css/bootstrap.min.css rel=stylesheet><link href=../../../css/font-awesome.min.css rel=stylesheet><link href=../../../css/bootstrap-theme.min.css rel=stylesheet><link href=../../../../../../theme/assets/stylesheets/extra.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/wa-mediabox@1.0.1/dist/wa-mediabox.min.css rel=stylesheet><!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.3/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]--><script src=../../../js/jquery-1.10.2.min.js></script><script src=../../../js/bootstrap.min.js></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'None', 'auto');
            ga('send', 'pageview');
        </script></head> <body> <div class="navbar navbar-default navbar-fixed-top" role=navigation> <div class=container> <div class=navbar-header> <button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=../../..>Geotribu</a> </div> <div class="navbar-collapse collapse"> <ul class="nav navbar-nav"> <li> <a href=../../..>&#127968; Accueil</a> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>Revues de presse <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../..>2021</a> </li> <li> <a href=../../..>2020</a> </li> <li> <a href=../../..>2017</a> </li> <li> <a href=../../..>2016</a> </li> <li> <a href=../../..>2015</a> </li> <li> <a href=../../..>2014</a> </li> <li> <a href=../../..>2013</a> </li> <li> <a href=../../..>2012</a> </li> <li> <a href=../../..>2011</a> </li> <li> <a href=../../..>2010</a> </li> </ul> </li> <li class="dropdown active"> <a href=# class=dropdown-toggle data-toggle=dropdown>Articles <b class=caret></b></a> <ul class=dropdown-menu> <li class=active> <a href=../../..>2021</a> </li> <li> <a href=../../..>2020</a> </li> <li> <a href=../../..>2015</a> </li> <li> <a href=../../..>2014</a> </li> <li> <a href=../../..>2013</a> </li> <li> <a href=../../..>2012</a> </li> <li> <a href=../../..>2011</a> </li> <li> <a href=../../..>2010</a> </li> <li> <a href=../../..>2009</a> </li> <li> <a href=../../..>2008</a> </li> </ul> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>Contribuer <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../contribuer/introduction/ >Contribuer à Geotribu</a> </li> <li> <a href=../../../contribuer/requirements/ >Prérequis pour la contribution</a> </li> <li> <a href=../../../contribuer/contribution_guide/ >Guide de contribution</a> </li> <li> <a href=../../..>Editer le contenu</a> </li> <li> <a href=../../..>Générer le site web</a> </li> <li> <a href=../../..>Guides de rédaction</a> </li> <li> <a href=../../..>Archives</a> </li> </ul> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>A propos <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../team/ >L'équipe Geotribu</a> </li> <li> <a href=../../../team/acha/ >Aurélien Chaumet</a> </li> <li> <a href=../../../team/avdc/ >Arnaud Vandecasteele</a> </li> <li> <a href=../../../team/avha/ >Adrien Van Hamme</a> </li> <li> <a href=../../../team/edel/ >Etienne Delay</a> </li> <li> <a href=../../../team/fbor/ >Florian Boret</a> </li> <li> <a href=../../../team/fgob/ >Fabien Goblet</a> </li> <li> <a href=../../../team/gdbo/ >Guillaume de Boyer</a> </li> <li> <a href=../../../team/jmou/ >Julien Moura</a> </li> <li> <a href=../../../team/jory/ >Jérémie Ory</a> </li> <li> <a href=../../../team/jpie/ >Julie Pierson</a> </li> <li> <a href=../../../team/mraj/ >Mathieu Rajerison</a> </li> <li> <a href=../../../team/pver/ >Pierre Vernier</a> </li> <li> <a href=../../../team/rbov/ >Rémi Bovard</a> </li> <li> <a href=../../../team/rqui/ >Rodolphe Quiédeville</a> </li> <li> <a href=../../../team/tgra/ >Thomas Gratier</a> </li> <li> <a href=../../..>Archives</a> </li> </ul> </li> </ul> <ul class="nav navbar-nav navbar-right"> <li> <a href=../2021-02-23_carte_ligne_libre/ rel=next> <i class="fa fa-arrow-left"></i> Previous </a> </li> <li> <a href=../2021-02-15_ignfr2map_carte_liens_IGN_open-data_7_etapes/ rel=prev> Next <i class="fa fa-arrow-right"></i> </a> </li> <li> <a href=https://github.com/geotribu/website/ > geotribu/website </a> </li> </ul> </div> </div> </div> <div class=container> <div class=row> <div class=col-md-3><div class="bs-sidebar hidden-print affix well" role=complementary> <ul class="nav bs-sidenav"> <li class="main active"><a href=#ign2map-automatisation-des-scripts-et-deploiement-de-la-carte>ign2map : automatisation des scripts et déploiement de la carte</a></li> <li><a href=#intro>Intro</a></li> <li><a href=#travaux-preliminaires>Travaux préliminaires</a></li> <li><a href=#le-deploiement>Le déploiement</a></li> <li><a href=#conclusion>Conclusion</a></li> <li><a href=#auteurs>Auteurs</a></li> <li class="main "><a href=#julien-moura>Julien Moura</a></li> <li class="main "><a href=#florian-boret>Florian Boret</a></li> </ul> </div></div> <div class=col-md-9 role=main> <h1 id=ign2map-automatisation-des-scripts-et-deploiement-de-la-carte>ign2map : automatisation des scripts et déploiement de la carte<a class=headerlink href=#ign2map-automatisation-des-scripts-et-deploiement-de-la-carte title="Permanent link">#</a></h1> <p>:calendar: Date de publication initiale : 19 Février 2021</p> <p><strong>Mots-clés :</strong> bash | IGN | déploiement | GitHub Actions | GitHub Pages</p> <p>Pré-requis :</p> <ul> <li>l'interpréteur <a href=https://fr.wikipedia.org/wiki/Bourne-Again_shell>Bourne-Again shell</a></li> <li>une connexion internet qui accède à <a href=https://geoservices.ign.fr/documentation/diffusion/telechargement-donnees-libres.html>la page de l'IGN qui référence les liens des données libres</a></li> </ul> <h2 id=intro>Intro<a class=headerlink href=#intro title="Permanent link">#</a></h2> <p><img alt="icône IGN" class=img-rdp-news-thumb src=https://cdn.geotribu.fr/img/logos-icones/entreprises_association/ign.png title=IGN></p> <p>Après avoir présenté la génèse et détaillé la démarche de notre petit projet de carte des liens IGN, voici venir le second volet consacré à l'exécution complètement automatisée et paramétrable des scripts puis du déploiement tout aussi automatique.</p> <p align=middle><a class=md-button href=https://geotribu.github.io/ign-fr-opendata-download-ui/index.html>Accéder à la carte :earth_africa:</a> <a href=/articles/2021/2021-02-15_ignfr2map_carte_liens_IGN_open-data_7_etapes/ class=md-button>Consulter l'article détaillant la démarche :fontawesome-solid-step-backward:</a></p> <p>L'IGN ayant annoncé que l'ouverture des données serait progressive, on anticipe que la page soit donc appelée à s'agrandir (<em>sic</em>). Pour que le projet ne soit pas un symbole d'obsolescence programmée (même s'il est certainement éphémère), on choisit donc d'automatiser le processus via <a href=https://github.com/features/actions>Github Actions</a> et la publication sur <a href=https://guides.github.com/features/pages/ >Github Pages</a>. Une chaîne de valeurs que l'on connaît bien puisque déjà utilisée pour générer et publier le site actuel de Geotribu à partir des fichiers Markdown.</p> <div class="admonition tip"> <p class=admonition-title>Sur Windows ?</p> <p>Vous êtes sur un système Windows et vous vous sentez frustré(e) de ne pas pouvoir expérimenter ce tutoriel ? Deux solutions s'offrent à vous :</p> <ul> <li><a href="https://youtu.be/DRBVUZjrT0k?t=76">adopter un pingouin</a> et batifoler joyeusement sur la banquise du libre :penguin:</li> <li>utiliser <a href=/articles/2020/2020-10-28_gdal_windows_subsystem_linux_wsl/ >WSL, le sous-système Linux intégré à Windows 10 en suivant notre article sur le sujet</a> :wink:</li> </ul> </div> <h2 id=travaux-preliminaires>Travaux préliminaires<a class=headerlink href=#travaux-preliminaires title="Permanent link">#</a></h2> <h3 id=variables-denvironnement-et-fichier-de-configuration>Variables d'environnement et fichier de configuration<a class=headerlink href=#variables-denvironnement-et-fichier-de-configuration title="Permanent link">#</a></h3> <p><img alt="logo Ministère de l'Environnement d'Haïti" class=img-rdp-news-thumb src=https://cdn.geotribu.fr/img/articles-blog-rdp/articles/ign_opendata_map/environnement_ministere_haiti.webp title="L'environnement, des politiques variables"></p> <p>Avant de pouvoir automatiser toute la chaîne d'exécution sur une plateforme d'intégration et de déploiement continus (CI/CD pour les intimes), il s'agit de rendre nos scripts paramétrables et indépendants de nos machines individuelles.</p> <p>L'idée est donc de pouvoir passer plusieurs paramètres :</p> <ul> <li>l'URL source</li> <li>gérer les échelles : départements, régions et France entière</li> <li>la liste des produits de l'IGN ouverts pour en ajouter, enlever ou renommer selon l'évolution de la dynamique</li> </ul> <p>S'il y a bien un mécanisme multi-plateforme, c'est celui des variables d'environnement. Linux, <a href=https://devblogs.microsoft.com/commandline/share-environment-vars-between-wsl-and-windows/ >Windows</a>, <a href=https://developer.android.com/studio/command-line/variables>Android</a>, <a href=https://docs.docker.com/compose/environment-variables/ >Docker</a>, ...</p> <p>Une variable d'environnement est donc un simple couple clé=valeur, qu'il est possible de stocker également dans des fichiers dont l'extension conventionnelle est <code>.env</code>. <a href=https://github.com/geotribu/ign-fr-opendata-download-ui/blob/main/example.env>Celui de notre script est sous ce lien</a> mais en voici un extrait pour vous montrer à quoi ça ressemble :</p> <div class=highlight><pre><span></span><code><span class=c1># SOURCE</span>
<span class=na>SOURCE_URL</span><span class=o>=</span><span class=s>&quot;https://geoservices.ign.fr/documentation/diffusion/telechargement-donnees-libres.html&quot;</span>

<span class=c1># CHEMINS LOCAUX</span>
<span class=na>LOG_FILE</span><span class=o>=</span><span class=s>&quot;/var/log/geotribu/ign2map.log&quot;</span>
<span class=na>RESULT_FOLDER</span><span class=o>=</span><span class=s>&quot;final&quot;</span>
<span class=na>TEMP_FOLDER</span><span class=o>=</span><span class=s>&quot;/tmp/&quot;</span>
<span class=na>TEMPLATES_FOLDER</span><span class=o>=</span><span class=s>&quot;templates&quot;</span>

<span class=c1># PRODUITS IGN</span>
<span class=na>LI_PRODUITS_DEPARTEMENTS</span><span class=o>=</span><span class=s>&quot;BDFORET,ORTHOHR_1-0_IRC,BDORTHO_2-0_IRC&quot;</span>
<span class=k>[...]</span>
</code></pre></div> <h3 id=parametres-et-arguments>Paramètres et arguments<a class=headerlink href=#parametres-et-arguments title="Permanent link">#</a></h3> <p>Dans un script Bash, le moyen le plus simple est d'utiliser <a href=https://www.commentcamarche.net/faq/5444-bash-les-arguments-parametres#parametres-positionnels>les paramètres positionnels</a>... enfin les paramètres passés dans un ordre précis quoi.</p> <p>Par exemple pour <a href=https://github.com/geotribu/ign-fr-opendata-download-ui/blob/main/scripts/4_csv_type.sh>le quatrième script</a> :</p> <div class=highlight><pre><span></span><code><span class=c1># Arguments</span>
<span class=nv>SCALE</span><span class=o>=</span><span class=nv>$1</span>
<span class=nv>SOURCE_FILE</span><span class=o>=</span><span class=nv>$2</span>
<span class=nv>OUTPUT_DIR</span><span class=o>=</span><span class=nv>$3</span>
<span class=nv>IFS</span><span class=o>=</span><span class=s2>&quot;,&quot;</span> <span class=nb>read</span> -a ARRAY_PRODUITS <span class=o>&lt;&lt;&lt;</span> <span class=nv>$4</span>
</code></pre></div> <p>On devra donc lancer le script avec 4 arguments :</p> <ol> <li>l'échelle : soit <code>departements</code>, soit <code>regions</code>, soit <code>france</code></li> <li>le chemin du fichier en entrée (ici le fichier de sortie du précédent script)</li> <li>le chemin du dossier où stocker le fichier en sortie</li> <li>la liste des produits de l'IGN</li> </ol> <p>Ce qui donne par exemple :</p> <div class=highlight><pre><span></span><code><span class=nb>source</span> scripts/4_csv_type.sh <span class=s2>&quot;departements&quot;</span> <span class=se>\</span>
  /tmp/3_filtered_csv/3_liens_par_dep_clean_ext.csv <span class=se>\</span>
  /tmp/4_csv_type <span class=se>\</span>
  <span class=s2>&quot;BDFORET,ORTHOHR_1-0_IRC,BDORTHO_2-0_IRC&quot;</span>
</code></pre></div> <h3 id=un-script-pour-les-gouverner-tous>Un script pour les gouverner tous<a class=headerlink href=#un-script-pour-les-gouverner-tous title="Permanent link">#</a></h3> <p>Une fois les 6 scripts rendus paramétrables, autant se faciliter la vie et permettre de les exécuter tous à la suite d'un coup.<br> On crée donc un script "orchestrateur" qui va lire le fichier de configuration (ou les variables d'environnement) et lancer les scripts dans le bon ordre en s'assurant de leur passer les bons paramètres à chaque fois : <a href=https://github.com/geotribu/ign-fr-opendata-download-ui/blob/main/ignfr2map.sh>ignfr2map.sh</a>.</p> <p align=middle><img alt="Lord of Scripts" loading=lazy src=https://cdn.geotribu.fr/img/articles-blog-rdp/divers/lord_of_scripts.png title="Lord of The Scripts"></p> <h3 id=pour-schematiser>Pour schématiser<a class=headerlink href=#pour-schematiser title="Permanent link">#</a></h3> <p>Grosso modo, voilà ce que ça donne (<em>désolé les flèches ne s'affichent pas bien avec le mode sombre</em>) :</p> <div class=mermaid>graph TD; A(Fichier de configuration); A --&gt; C{ignfr2map.sh}; C --&gt; D[1_scraper.sh]; C --&gt; E[2_departements.sh&lt;br&gt;2_france.sh&lt;br&gt;2_regions.sh]; C --&gt; F[3_filtered_csv.sh]; C --&gt; G[4_csv_type.sh]; C --&gt; H[5_join_csv_topojson.sh]; C --&gt; I[6_create_html.sh];</div> <blockquote> <p><a href=https://mermaid.ink/svg/eyJjb2RlIjoiZ3JhcGggVERcbiAgICBBKEZpY2hpZXIgZGUgY29uZmlndXJhdGlvbilcbiAgICBBIC0tPiBDe2lnbmZyMm1hcC5zaH1cbiAgICBDIC0tPiBEWzFfc2NyYXBlci5zaF1cbiAgICBDIC0tPiBFWzJfZGVwYXJ0ZW1lbnRzLnNoPGJyPjJfZnJhbmNlLnNoPGJyPjJfcmVnaW9ucy5zaF1cbiAgICBDIC0tPiBGWzNfZmlsdGVyZWRfY3N2LnNoXSBcbiAgICBDIC0tPiBHWzRfY3N2X3R5cGUuc2hdIFxuICAgIEMgLS0-IEhbNV9qb2luX2Nzdl90b3BvanNvbi5zaF0gXG4gICAgQyAtLT4gSVs2X2NyZWF0ZV9odG1sLnNoXSIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9>Voir le schéma en grand</a></p> </blockquote> <hr> <h2 id=le-deploiement>Le déploiement<a class=headerlink href=#le-deploiement title="Permanent link">#</a></h2> <p><img alt="icône GitHub Actions" class=img-rdp-news-thumb src=https://cdn.geotribu.fr/img/logos-icones/divers/github_actions.png title="GitHub Actions"></p> <p>A l'instar de la plupart des autres, <a href=https://github.com/features/actions>GitHub Actions</a> consiste à décrire le processus (<em>workflow</em> dans la terminologie GitHub) dans la syntaxe <a href=https://fr.wikipedia.org/wiki/YAML>YAML</a>.</p> <p>Le <a href=https://github.com/geotribu/ign-fr-opendata-download-ui/blob/main/.github/workflows/run_n_publish.yml>fichier complet est dans le dépôt</a> mais prenons ici le temps de détailler les étapes. </p> <h3 id=conditions-dexecution>Conditions d'exécution<a class=headerlink href=#conditions-dexecution title="Permanent link">#</a></h3> <p>Tout d'abord, on indique les critères de déclenchement du processus. On a choisi de concilier deux cas de figure :</p> <ul> <li>une exécution récurrente sur une base mensuelle, le premier jour de chaque mois</li> <li>une exécution manuelle pour nos tests ou quand l'envie nous prend</li> </ul> <p>On souhaite également déclencher l'exécution uniquement lorsque des modifications sont appliquées sur la branche principale du projet.</p> <p>Voici ce que cela donne :</p> <div class=highlight><pre><span></span><code><span class=nt>on</span><span class=p>:</span>
  <span class=nt>schedule</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class=nt>cron</span><span class=p>:</span> <span class=s>&quot;0</span><span class=nv> </span><span class=s>0</span><span class=nv> </span><span class=s>1</span><span class=nv> </span><span class=s>*</span><span class=nv> </span><span class=s>*&quot;</span>  <span class=c1># exécution planifiée le premier jour de chaque mois</span>
  <span class=nt>workflow_dispatch</span><span class=p>:</span>     <span class=c1># permet de déclencher manuellement (ici sans passer aucun paramètre particulier)</span>
  <span class=nt>push</span><span class=p>:</span>
    <span class=nt>branches</span><span class=p>:</span> <span class="p p-Indicator">[</span> <span class=nv>main</span> <span class="p p-Indicator">]</span>
    <span class=nt>paths</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=s>&#39;.github/workflows/run_n_publish.yml&#39;</span>  <span class=c1># on déclenche aussi quand le fichier du workflow est lui-même modifié</span>
</code></pre></div> <h3 id=lenvironnement-dexecution>L'environnement d'exécution<a class=headerlink href=#lenvironnement-dexecution title="Permanent link">#</a></h3> <p>Une fois les règles de déclenchement en place, passons aux tâches (<em>jobs</em>) qui doivent être exécutées. On commence par indiquer dans quel environnement on travaille.<br> Vu que notre outil est écrit en bash, une surcouche au shell Linux, on opte pour Ubuntu :</p> <div class=highlight><pre><span></span><code><span class=nt>jobs</span><span class=p>:</span>
  <span class=nt>run</span><span class=p>:</span>
    <span class=nt>runs-on</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
</code></pre></div> <h3 id=les-etapes>Les étapes<a class=headerlink href=#les-etapes title="Permanent link">#</a></h3> <p>Puis, on décrit pas à pas (<em>steps</em>) les différentes tâches.</p> <h4 id=recuperation-du-code>Récupération du code<a class=headerlink href=#recuperation-du-code title="Permanent link">#</a></h4> <p>On commence par récupérer le contenu du dépôt Git (= <code>git fetch</code> ou <code>clone</code> pour les intimes) :</p> <div class=highlight><pre><span></span><code><span class=nt>steps</span><span class=p>:</span>
  <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">Checkout</span>
    <span class=nt>uses</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">actions/checkout@master</span>
</code></pre></div> <h4 id=parametrage-des-options>Paramétrage des options<a class=headerlink href=#parametrage-des-options title="Permanent link">#</a></h4> <p>On utilise les variables d'environnement définies dans le fichier example et on le renomme. Notez que c'est la solution de facilité et qu'il aurait été préférable d'utiliser des variables d'environnement :</p> <ul> <li>soit définies en haut du fichier (voir <a href=https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#env>doc sur <code>env:</code></a>),</li> <li>soit via <a href=https://docs.github.com/en/actions/reference/environments>la définition d'un environnement</a> ou <a href=https://docs.github.com/en/actions/reference/encrypted-secrets>les Actions Secrets</a></li> </ul> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">Rename env file</span>
  <span class=nt>run</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">mv example.env .env</span>
</code></pre></div> <h4 id=execution>Exécution<a class=headerlink href=#execution title="Permanent link">#</a></h4> <p>Sommairement<sup id=fnref:1><a class=footnote-ref href=#fn:1>1</a></sup>, cela donne donc :</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">Run it</span>
  <span class=nt>run</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">bash ./ignfr2map.sh</span>
</code></pre></div> <p>Vu qu'on utilise les paramètres par défaut, les fichiers en sortie sont donc stockés dans le dossier <code>final</code>. Histoire de se faciliter le debug, on peut lister les fichiers temporaires et finaux :</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">List temp</span>
  <span class=nt>run</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">ls -R _temp/</span>

<span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">List final output</span>
  <span class=nt>run</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">ls -R final/</span>
</code></pre></div> <h4 id=deploiement>Déploiement<a class=headerlink href=#deploiement title="Permanent link">#</a></h4> <p>Enfin, il s'agit de pousser le dossier final sur la branche <code>gh-pages</code> publiée sur <a href=https://guides.github.com/features/pages/ >Github Pages</a>. Pour cela, j'ai pris l'habitude d'utiliser l'outil <a href=https://pypi.org/project/ghp-import/ >ghp-import</a>, notamment inclus dans [MkDocs] (l'outil qu'on utilise pour notre site). C'est par flemme car dans l'idéal il aurait fallu rester avec la seule ligne de commande et ainsi ne pas avoir besoin d'installer Python.<br> Disons qu'on donne ainsi une chance à une contribution externe de briller :sparkler: :wink:.</p> <p>Voici ce que ça donne :</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">Set up Python</span>
  <span class=nt>uses</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">actions/setup-python@v2.2.1</span>
  <span class=nt>with</span><span class=p>:</span>
    <span class=nt>python-version</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">3.8</span>

<span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">Deploy to GitHub Pages</span>
  <span class=nt>run</span><span class=p>:</span> <span class="p p-Indicator">|</span>
    <span class=no>python -m pip install ghp-import</span>
    <span class=no>ghp-import --force --no-jekyll --push final</span>
</code></pre></div> <hr> <h2 id=conclusion>Conclusion<a class=headerlink href=#conclusion title="Permanent link">#</a></h2> <p>Ce travail semble long mais c'est surtout que j'ai tenu à le détailler car en réalité, l'exécution complète de toute la chaîne de valeur prend moins d'une minute :</p> <p align=middle><img alt="Github workflow result" loading=lazy src=https://cdn.geotribu.fr/img/articles-blog-rdp/articles/ign_opendata_map/github_action_workflow_result.png title="Résultat de l'exécution déclenchée manuellement : 40 secondes"></p> <hr> <h2 id=auteurs>Auteurs<a class=headerlink href=#auteurs title="Permanent link">#</a></h2> <h1 id=julien-moura>Julien Moura<a class=headerlink href=#julien-moura title="Permanent link">#</a></h1> <p><img alt="Portrait Julien Moura" class=img-rdp-news-thumb src=https://cdn.geotribu.fr/img/internal/contributeurs/jmou.jfif title="Portrait Julien Moura"></p> <p>Géographe "sigiste" de formation, j'ai d'abord travaillé sur différentes thématiques et types de structures : la gestion des déchets en milieu urbain à Madagascar, le foncier d'intérêt général auprès de <a href=http://www.epf-reunion.com/ >l'EPF de La Réunion</a>, l'organisation et la résilience urbaine face aux risques naturels à Lima pour l'IRD.</p> <p>C'est en m'intéressant à la gouvernance et à l'ouverture des données géographiques que je travaille à <a href=https://www.isogeo.com>Isogeo</a> quelques années. L'occasion d'asseoir mes compétences en développement et gestion de produit informatique. En 2020, je deviens indépendant (In Geo Veritas) puis rejoins les rangs d'<a href=https://oslandia.com/ >Oslandia</a>.</p> <p>Féru des dynamiques de contributions, je participe activement à Geotribu depuis fin 2011 et, comme ça me manquait trop, j'ai décidé de lancer sa renaissance en 2020.</p> <h1 id=florian-boret>Florian Boret<a class=headerlink href=#florian-boret title="Permanent link">#</a></h1> <p><img alt="Portrait Florian Boret" class=img-rdp-news-thumb src=https://cdn.geotribu.fr/img/internal/contributeurs/fbor.png title="Portrait Florian Boret"></p> <p>Géomaticien/cartographe, je suis arrivé dans le monde de la géomatique en suivant un cursus « professionnalisant » (BTS Géomètre-Topographe, Licence pro GGAT, Master SIGAT). J’ai ensuite travaillé dans un bureau d’études spécialisé dans la production de données d’occupation du sol et puis pour des raisons personnelles je me suis expatrié quelques années au Sénégal où je me suis lancé comme géomaticien indépendant (<a href=https://www.data-wax.com/ >DATA\WAX</a>).</p> <p>Depuis mon retour en France, je suis en charge du SIG de la communauté de communes du Pays de Lunel.</p> <p>En dehors de ces expériences, j'ai aussi régulièrement initié de petits projets personnels <a href=https://www.igeo-topo.fr>iGeo-Topo</a>, GIS-Blog.fr, <a href=https://github.com/igeofr/osm2igeo>osm2igeo</a>, <a href=https://github.com/igeofr/osm2igeotopo>osm2igeotopo</a>. Aujourd'hui, c’est avec plaisir que j’interviens également comme contributeur de GeoTribu.</p> <div class=footnote> <hr> <ol> <li id=fn:1> <p>oui, j'ai osé ce jeu de mots avec le titre du paragraphe :wink:&#160;<a class=footnote-backref href=#fnref:1 title="Jump back to footnote 1 in the text">&#8617;</a></p> </li> </ol> </div></div> </div> </div> <hr> <footer class=container> <center><span class=copyleft>&copy;</span> Geotribu</center> <center>Documentation built with <a href=http://www.mkdocs.org>MkDocs</a> and <a href=http://kristopolous.github.io/BOOTSTRA.386>BOOTSTRA.386</a>.</center> </footer> <script src=../../../../../../theme/assets/javascripts/extra.js></script> <script src=https://cdn.jsdelivr.net/npm/wa-mediabox@1.0.1/dist/wa-mediabox.min.js></script> <script src=https://unpkg.com/mermaid@8.6.4/dist/mermaid.min.js></script> <script src=../../../../../../search/main.js></script> </body> </html>