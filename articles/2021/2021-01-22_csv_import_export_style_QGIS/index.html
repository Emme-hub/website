<!DOCTYPE html><html lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=description content="Site indépendant de veille sur la géomatique libre et open source. Articles, tutoriels et revues de presse (#GeoRDP) sur l'information géographique, les SIG, la cartographie, la représentation des données..."><meta name=author content=Geotribu><link href=https://static.geotribu.fr/articles/2021/2021-01-22_csv_import_export_style_QGIS/ rel=canonical><link rel="shortcut icon" href=../../../img/favicon.ico><title>CSV - Import/export d'un style catégorisé QGIS - Geotribu</title><link href=../../../css/bootstrap.min.css rel=stylesheet><link href=../../../css/font-awesome.min.css rel=stylesheet><link href=../../../css/bootstrap-theme.min.css rel=stylesheet><link href=../../../../../../theme/assets/stylesheets/extra.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/wa-mediabox@1.0.1/dist/wa-mediabox.min.css rel=stylesheet><!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.3/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]--><script src=../../../js/jquery-1.10.2.min.js></script><script src=../../../js/bootstrap.min.js></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'None', 'auto');
            ga('send', 'pageview');
        </script></head> <body> <div class="navbar navbar-default navbar-fixed-top" role=navigation> <div class=container> <div class=navbar-header> <button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=../../..>Geotribu</a> </div> <div class="navbar-collapse collapse"> <ul class="nav navbar-nav"> <li> <a href=../../..>&#127968; Accueil</a> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>Revues de presse <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../..>2021</a> </li> <li> <a href=../../..>2020</a> </li> <li> <a href=../../..>2017</a> </li> <li> <a href=../../..>2016</a> </li> <li> <a href=../../..>2015</a> </li> <li> <a href=../../..>2014</a> </li> <li> <a href=../../..>2013</a> </li> <li> <a href=../../..>2012</a> </li> <li> <a href=../../..>2011</a> </li> <li> <a href=../../..>2010</a> </li> </ul> </li> <li class="dropdown active"> <a href=# class=dropdown-toggle data-toggle=dropdown>Articles <b class=caret></b></a> <ul class=dropdown-menu> <li class=active> <a href=../../..>2021</a> </li> <li> <a href=../../..>2020</a> </li> <li> <a href=../../..>2015</a> </li> <li> <a href=../../..>2014</a> </li> <li> <a href=../../..>2013</a> </li> <li> <a href=../../..>2012</a> </li> <li> <a href=../../..>2011</a> </li> <li> <a href=../../..>2010</a> </li> <li> <a href=../../..>2009</a> </li> <li> <a href=../../..>2008</a> </li> </ul> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>Contribuer <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../contribuer/introduction/ >Contribuer à Geotribu</a> </li> <li> <a href=../../../contribuer/requirements/ >Prérequis pour la contribution</a> </li> <li> <a href=../../../contribuer/contribution_guide/ >Guide de contribution</a> </li> <li> <a href=../../..>Editer le contenu</a> </li> <li> <a href=../../..>Générer le site web</a> </li> <li> <a href=../../..>Guides de rédaction</a> </li> <li> <a href=../../..>Archives</a> </li> </ul> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>A propos <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../team/ >L'équipe Geotribu</a> </li> <li> <a href=../../../team/acha/ >Aurélien Chaumet</a> </li> <li> <a href=../../../team/avdc/ >Arnaud Vandecasteele</a> </li> <li> <a href=../../../team/avha/ >Adrien Van Hamme</a> </li> <li> <a href=../../../team/edel/ >Etienne Delay</a> </li> <li> <a href=../../../team/fbor/ >Florian Boret</a> </li> <li> <a href=../../../team/fgob/ >Fabien Goblet</a> </li> <li> <a href=../../../team/gdbo/ >Guillaume de Boyer</a> </li> <li> <a href=../../../team/jmou/ >Julien Moura</a> </li> <li> <a href=../../../team/jory/ >Jérémie Ory</a> </li> <li> <a href=../../../team/jpie/ >Julie Pierson</a> </li> <li> <a href=../../../team/mraj/ >Mathieu Rajerison</a> </li> <li> <a href=../../../team/pver/ >Pierre Vernier</a> </li> <li> <a href=../../../team/rbov/ >Rémi Bovard</a> </li> <li> <a href=../../../team/rqui/ >Rodolphe Quiédeville</a> </li> <li> <a href=../../../team/tgra/ >Thomas Gratier</a> </li> <li> <a href=../../..>Archives</a> </li> </ul> </li> </ul> <ul class="nav navbar-nav navbar-right"> <li> <a href=../2021-01-26_test_unfolded_studio/ rel=next> <i class="fa fa-arrow-left"></i> Previous </a> </li> <li> <a href=../2021-01-19_pyqgis_utiliser_icones_integrees/ rel=prev> Next <i class="fa fa-arrow-right"></i> </a> </li> <li> <a href=https://github.com/geotribu/website/ > geotribu/website </a> </li> </ul> </div> </div> </div> <div class=container> <div class=row> <div class=col-md-3><div class="bs-sidebar hidden-print affix well" role=complementary> <ul class="nav bs-sidenav"> <li class="main active"><a href=#csv-importexport-dun-style-categorise-qgis>CSV - Import/export d'un style catégorisé QGIS</a></li> <li><a href=#historique-qgis2>Historique (QGIS2)</a></li> <li><a href=#aujourdhui-qgis3>Aujourd'hui (QGIS3)</a></li> <li><a href=#pour-aller-plus-loin>Pour aller plus loin</a></li> <li><a href=#comment-ajouter-ces-scripts-dans-qgis3>Comment ajouter ces scripts dans QGIS3</a></li> <li><a href=#pour-terminer>Pour terminer</a></li> <li><a href=#auteur>Auteur</a></li> <li class="main "><a href=#florian-boret>Florian Boret</a></li> </ul> </div></div> <div class=col-md-9 role=main> <h1 id=csv-importexport-dun-style-categorise-qgis>CSV - Import/export d'un style catégorisé QGIS<a class=headerlink href=#csv-importexport-dun-style-categorise-qgis title="Permanent link">#</a></h1> <p>:calendar: Date de publication initiale : 22 janvier 2021</p> <p><strong>Mots-clés :</strong> QGIS | style | CSV | processing</p> <h2 id=historique-qgis2>Historique (QGIS2)<a class=headerlink href=#historique-qgis2 title="Permanent link">#</a></h2> <p>En 2015, après avoir lu l'article de José Guerrero <a href=https://joseguerreroa.wordpress.com/2015/02/22/como-establecer-el-color-de-un-rasgo-feature-dependiendo-de-los-valores-de-los-atributos-con-pyqgis/ ><em>Cómo establecer el color de un rasgo (feature) dependiendo de los valores de los atributos con PyQGIS</em></a>, l'idée m'était venue de créer 2 scripts python/processing afin de générer un <strong>style catégorisé</strong> à partir d'un fichier CSV dans lequel des codes couleurs seraient renseignés.</p> <p>Pourquoi ? Parce que saisir jusqu'à 80 codes couleur à la mains c'était juste pas concevable :wink: !</p> <ul> <li>le premier script avait besoin de 3 colonnes R,G,B dans le fichier csv : <a href=https://github.com/igeofr/qgis2/blob/master/scripts/CSV_R-G-B_to_categorized_style.py>CSV_R-G-B_to_categorized_style.py</a>.</li> <li>le second avait besoin d'un seul champ de couleur RGB ou Hexadécimal : <a href=https://github.com/igeofr/qgis2/blob/master/scripts/CSV_RGB_or_HEX_to_categorized_style.py>CSV_RGB_or_HEX_to_categorized_style.py</a>.</li> </ul> <p align=middle><img alt="Exemple Réunion" loading=lazy src=https://cdn.geotribu.fr/img/articles-blog-rdp/articles/CSV_QGIS_style.gif title="Exemple réalisé à partir de la donnée Corine Land Cover de la Réunion."><br> <em>Exemple réalisé à partir de la donnée Corine Land Cover de la Réunion.</em></p> <h2 id=aujourdhui-qgis3>Aujourd'hui (QGIS3)<a class=headerlink href=#aujourdhui-qgis3 title="Permanent link">#</a></h2> <p>Fin 2020 et après 5 années de bons et loyaux services, il était grand temps de réécrire ces scripts pour QGIS3 en tenant compte des nombreuses évolutions liées au processing.</p> <ul> <li>le premier a toujours besoin de 3 colonnes dans le fichier csv : Red - Green – Blue : <a href=https://github.com/igeofr/qgis3/blob/master/scripts/style/CSV_R_G_B_to_categorized_style_algo.py>CSV_R_G_B_to_categorized_style_algo.py</a>.</li> </ul> <div class="admonition info"> <p class=admonition-title>Structure du fichier CSV</p> <p>Par défaut, la structure du fichier CSV est la suivante : <code>Value;Label;Red;Green;Blue</code> mais l'ordre peut être modifié puisque le script permet de définir le numéro de chaque colonne en commençant par zéro.<br> Par défaut : <code>value : 0 ; label : 1 ; Red : 2 ; Green : 3 ; Blue : 4</code>.</p> </div> <ul> <li>le second a été séparé en deux scripts qui utilisent toujours une seule colonne de couleur :<ul> <li>Hexadécimal : <a href=https://github.com/igeofr/qgis3/blob/master/scripts/style/CSV_HEX_to_categorized_style_algo.py>CSV_HEX_to_categorized_style_algo.py</a></li> <li>ou RGB : <a href=https://github.com/igeofr/qgis3/blob/master/scripts/style/CSV_RGB_to_categorized_style_algo.py>CSV_RGB_to_categorized_style_algo.py</a>.</li> </ul> </li> </ul> <div class="admonition info"> <p class=admonition-title>Structure du fichier CSV</p> <p>Par défaut, la structure du fichier CSV est la suivante : <code>Value;Label;RGB</code> mais l'ordre peut être modifié puisque le script permet là aussi de définir le numéro de chaque colonne en commençant par zéro.<br> Parr défaut : <code>value : 0 ; label : 1 ; RGB : 2</code>.</p> </div> <h2 id=pour-aller-plus-loin>Pour aller plus loin<a class=headerlink href=#pour-aller-plus-loin title="Permanent link">#</a></h2> <p>Pour compléter ces premiers outils, j'en ai profité pour travailler sur un nouveau script python/processing qui permet cette fois-ci d'exporter les couleurs d'un style QGIS vers un fichier CSV (la boucle est bouclée !) : <a href=https://github.com/igeofr/qgis3/blob/master/scripts/style/Style_to_CSV_algo.py>Style_to_CSV_algo.py</a>.</p> <p align=middle><img alt="Exemple Lunellois" loading=lazy src=https://cdn.geotribu.fr/img/articles-blog-rdp/articles/QGIS_style_CSV.gif title="Exemple réalisé à partir d'une donnée produite sur le territoire du Lunellois."><br> <em>Exemple réalisé à partir d'une donnée produite sur le territoire du Lunellois</em></p> <hr> <h2 id=comment-ajouter-ces-scripts-dans-qgis3>Comment ajouter ces scripts dans QGIS3<a class=headerlink href=#comment-ajouter-ces-scripts-dans-qgis3 title="Permanent link">#</a></h2> <h3 id=la-facilite>La facilité<a class=headerlink href=#la-facilite title="Permanent link">#</a></h3> <p>Ouvrir la fenêtre du processing et :point_down:</p> <p align=middle><img alt="Liste des scripts" loading=lazy src=https://cdn.geotribu.fr/img/articles-blog-rdp/articles/ajouter_scripts.png title="Liste des scripts."></p> <h3 id=a-lancienne>A l'ancienne<a class=headerlink href=#a-lancienne title="Permanent link">#</a></h3> <ol> <li> <p>Vous devez placer le ou les script(s) dans ce répertoire :</p> <ul> <li>Linux : <code>/home/USER/.local/share/QGIS/QGIS3/profiles/default/processing/scripts</code></li> <li>MacOS : <code>~/Bibliothèque/Application Support/QGIS/QGIS3/profiles/default/processing/scripts</code></li> <li>Windows : <code>C:\Users\USER\AppData\Roaming\QGIS\QGIS3\profiles\default\processing\scripts</code></li> </ul> </li> <li> <p>Lancer QGIS</p> </li> <li> <p>Ensuite au niveau de la fenêtre du processing, vous devez voir une section <code>Scripts</code> :</p> <p align=middle><img alt=Scripts loading=lazy src=https://cdn.geotribu.fr/img/articles-blog-rdp/articles/scripts_processing.png title=Scripts.></p> </li> <li> <p>Si vous la déroulez vous devez voir la sous-section "Style" dans laquelle se trouvent les scripts ajoutés.</p> <p align=middle><img alt="Liste des scripts" loading=lazy src=https://cdn.geotribu.fr/img/articles-blog-rdp/articles/scripts_QGIS_style.png title="Liste des scripts."></p> </li> </ol> <h2 id=pour-terminer>Pour terminer<a class=headerlink href=#pour-terminer title="Permanent link">#</a></h2> <p>En ce qui me concerne, j'ai régulièrement utilisé ces scripts lors de travaux sur l'occupation du sol ou le nombre de classes était généralement important. Au-delà du fait qu'ils m'ont fait gagné un temps précieux, ils m'ont aussi permis de jongler plus facilement entre des nomenclatures (tableurs) et QGIS.</p> <p>Je vous laisse maintenant assaisonner vos cartes de couleurs :yum:!</p> <hr> <h2 id=auteur>Auteur<a class=headerlink href=#auteur title="Permanent link">#</a></h2> <h1 id=florian-boret>Florian Boret<a class=headerlink href=#florian-boret title="Permanent link">#</a></h1> <p><img alt="Portrait Florian Boret" class=img-rdp-news-thumb src=https://cdn.geotribu.fr/img/internal/contributeurs/fbor.png title="Portrait Florian Boret"></p> <p>Géomaticien/cartographe, je suis arrivé dans le monde de la géomatique en suivant un cursus « professionnalisant » (BTS Géomètre-Topographe, Licence pro GGAT, Master SIGAT). J’ai ensuite travaillé dans un bureau d’études spécialisé dans la production de données d’occupation du sol et puis pour des raisons personnelles je me suis expatrié quelques années au Sénégal où je me suis lancé comme géomaticien indépendant (<a href=https://www.data-wax.com/ >DATA\WAX</a>).</p> <p>Depuis mon retour en France, je suis en charge du SIG de la communauté de communes du Pays de Lunel.</p> <p>En dehors de ces expériences, j'ai aussi régulièrement initié de petits projets personnels <a href=https://www.igeo-topo.fr>iGeo-Topo</a>, GIS-Blog.fr, <a href=https://github.com/igeofr/osm2igeo>osm2igeo</a>, <a href=https://github.com/igeofr/osm2igeotopo>osm2igeotopo</a>. Aujourd'hui, c’est avec plaisir que j’interviens également comme contributeur de GeoTribu.</p></div> </div> </div> <hr> <footer class=container> <center><span class=copyleft>&copy;</span> Geotribu</center> <center>Documentation built with <a href=http://www.mkdocs.org>MkDocs</a> and <a href=http://kristopolous.github.io/BOOTSTRA.386>BOOTSTRA.386</a>.</center> </footer> <script src=../../../../../../theme/assets/javascripts/extra.js></script> <script src=https://cdn.jsdelivr.net/npm/wa-mediabox@1.0.1/dist/wa-mediabox.min.js></script> <script src=https://unpkg.com/mermaid@8.6.4/dist/mermaid.min.js></script> <script src=../../../../../../search/main.js></script> </body> </html>