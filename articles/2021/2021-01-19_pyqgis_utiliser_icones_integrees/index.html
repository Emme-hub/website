<!DOCTYPE html><html lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=description content="Site indépendant de veille sur la géomatique libre et open source. Articles, tutoriels et revues de presse (#GeoRDP) sur l'information géographique, les SIG, la cartographie, la représentation des données..."><meta name=author content=Geotribu><link href=https://static.geotribu.fr/articles/2021/2021-01-19_pyqgis_utiliser_icones_integrees/ rel=canonical><link rel="shortcut icon" href=../../../img/favicon.ico><title>Plugin QGIS : utiliser les icônes intégrées - Geotribu</title><link href=../../../css/bootstrap.min.css rel=stylesheet><link href=../../../css/font-awesome.min.css rel=stylesheet><link href=../../../css/bootstrap-theme.min.css rel=stylesheet><link href=../../../../../../theme/assets/stylesheets/extra.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/wa-mediabox@1.0.1/dist/wa-mediabox.min.css rel=stylesheet><!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.3/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]--><script src=../../../js/jquery-1.10.2.min.js></script><script src=../../../js/bootstrap.min.js></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'None', 'auto');
            ga('send', 'pageview');
        </script></head> <body> <div class="navbar navbar-default navbar-fixed-top" role=navigation> <div class=container> <div class=navbar-header> <button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=../../..>Geotribu</a> </div> <div class="navbar-collapse collapse"> <ul class="nav navbar-nav"> <li> <a href=../../..>&#127968; Accueil</a> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>Revues de presse <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../..>2021</a> </li> <li> <a href=../../..>2020</a> </li> <li> <a href=../../..>2017</a> </li> <li> <a href=../../..>2016</a> </li> <li> <a href=../../..>2015</a> </li> <li> <a href=../../..>2014</a> </li> <li> <a href=../../..>2013</a> </li> <li> <a href=../../..>2012</a> </li> <li> <a href=../../..>2011</a> </li> <li> <a href=../../..>2010</a> </li> </ul> </li> <li class="dropdown active"> <a href=# class=dropdown-toggle data-toggle=dropdown>Articles <b class=caret></b></a> <ul class=dropdown-menu> <li class=active> <a href=../../..>2021</a> </li> <li> <a href=../../..>2020</a> </li> <li> <a href=../../..>2015</a> </li> <li> <a href=../../..>2014</a> </li> <li> <a href=../../..>2013</a> </li> <li> <a href=../../..>2012</a> </li> <li> <a href=../../..>2011</a> </li> <li> <a href=../../..>2010</a> </li> <li> <a href=../../..>2009</a> </li> <li> <a href=../../..>2008</a> </li> </ul> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>Contribuer <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../contribuer/introduction/ >Contribuer à Geotribu</a> </li> <li> <a href=../../../contribuer/requirements/ >Prérequis pour la contribution</a> </li> <li> <a href=../../../contribuer/contribution_guide/ >Guide de contribution</a> </li> <li> <a href=../../..>Editer le contenu</a> </li> <li> <a href=../../..>Générer le site web</a> </li> <li> <a href=../../..>Guides de rédaction</a> </li> <li> <a href=../../..>Archives</a> </li> </ul> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>A propos <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../team/ >L'équipe Geotribu</a> </li> <li> <a href=../../../team/acha/ >Aurélien Chaumet</a> </li> <li> <a href=../../../team/avdc/ >Arnaud Vandecasteele</a> </li> <li> <a href=../../../team/avha/ >Adrien Van Hamme</a> </li> <li> <a href=../../../team/edel/ >Etienne Delay</a> </li> <li> <a href=../../../team/fbor/ >Florian Boret</a> </li> <li> <a href=../../../team/fgob/ >Fabien Goblet</a> </li> <li> <a href=../../../team/gdbo/ >Guillaume de Boyer</a> </li> <li> <a href=../../../team/jmou/ >Julien Moura</a> </li> <li> <a href=../../../team/jory/ >Jérémie Ory</a> </li> <li> <a href=../../../team/jpie/ >Julie Pierson</a> </li> <li> <a href=../../../team/mraj/ >Mathieu Rajerison</a> </li> <li> <a href=../../../team/pver/ >Pierre Vernier</a> </li> <li> <a href=../../../team/rbov/ >Rémi Bovard</a> </li> <li> <a href=../../../team/rqui/ >Rodolphe Quiédeville</a> </li> <li> <a href=../../../team/tgra/ >Thomas Gratier</a> </li> <li> <a href=../../..>Archives</a> </li> </ul> </li> </ul> <ul class="nav navbar-nav navbar-right"> <li> <a href=../2021-01-22_csv_import_export_style_QGIS/ rel=next> <i class="fa fa-arrow-left"></i> Previous </a> </li> <li> <a href=../2021-01-04_bilan_2020_perspectives_2021/ rel=prev> Next <i class="fa fa-arrow-right"></i> </a> </li> <li> <a href=https://github.com/geotribu/website/ > geotribu/website </a> </li> </ul> </div> </div> </div> <div class=container> <div class=row> <div class=col-md-3><div class="bs-sidebar hidden-print affix well" role=complementary> <ul class="nav bs-sidenav"> <li class="main active"><a href=#utiliser-les-icones-integrees-de-qgis-pour-egayer-ses-plugins>Utiliser les icônes intégrées de QGIS pour égayer ses plugins</a></li> <li><a href=#intro>Intro</a></li> <li><a href=#recycler-les-icones-de-linterface-de-qgis>Recycler les icônes de l'interface de QGIS</a></li> <li><a href=#auteur>Auteur</a></li> <li class="main "><a href=#julien-moura>Julien Moura</a></li> </ul> </div></div> <div class=col-md-9 role=main> <h1 id=utiliser-les-icones-integrees-de-qgis-pour-egayer-ses-plugins>Utiliser les icônes intégrées de QGIS pour égayer ses plugins<a class=headerlink href=#utiliser-les-icones-integrees-de-qgis-pour-egayer-ses-plugins title="Permanent link">#</a></h1> <p>:calendar: Date de publication initiale : 19 janvier 2021</p> <p><strong>Mots-clés :</strong> QGIS | PyQGIS | développement | plugin | interface graphique</p> <p>Pré-requis :</p> <ul> <li>des notions en PyQGIS (Python + Qt + API QGIS)</li> </ul> <h2 id=intro>Intro<a class=headerlink href=#intro title="Permanent link">#</a></h2> <p><img alt="icône PyQT" class=img-rdp-news-thumb src=https://cdn.geotribu.fr/img/logos-icones/programmation/python_and_qt.svg title="Python + Qt = PyQt"></p> <p>Avec mon arrivée chez <a href=https://oslandia.com/ >Oslandia</a>, je me remets au développement de plugins pour QGIS alors autant partager de temps en temps quelques cas d’usage :slightly_smiling_face:.</p> <p>Lorsque qu'il s'agit de soigner l'interface graphique, c'est souvent fastidieux, notamment de concevoir ou de trouver des éléments graphiques. Bien souvent les menus sont dénués d'icônes, au détriment de la convivialité, de l'accessibilité et de la lisibilité.</p> <p align=middle><img alt="menu plugin cadastre" class=img-center src=https://cdn.geotribu.fr/img/tuto/qgis_plugin_embedded_images/pyqgis_menu_icons_cadastre.png title="Le menu du plugin Cadastre"> <em>Pourtant c'est quand même plus joli avec des icônes</em></p> <h2 id=recycler-les-icones-de-linterface-de-qgis>Recycler les icônes de l'interface de QGIS<a class=headerlink href=#recycler-les-icones-de-linterface-de-qgis title="Permanent link">#</a></h2> <p>Une solution est d'utiliser les images déjà embarquées dans QGIS. Elles sont déjà chargées, intégrées dans le thème de QGIS et sont suffisamment génériques pour bien des cas de figure. La plupart des images sont répertoriées dans le <em>Resource Collection File</em> enfin le <a href=https://github.com/qgis/QGIS/blob/master/images/images.qrc>fichier de ressources</a> quoi.</p> <p>Par exemple, lorsque l'on ajoute un bouton d'aide à son menu, on peut pointer sur celle du manuel d'aide de QGIS :</p> <div class=highlight><pre><span></span><code><span class=c1># imports</span>
<span class=kn>from</span> <span class=nn>qgis.core</span> <span class=kn>import</span> <span class=n>QgsApplication</span>
<span class=kn>from</span> <span class=nn>qgis.PyQt.QtGui</span> <span class=kn>import</span> <span class=n>QIcon</span>

<span class=p>[</span><span class=o>...</span><span class=p>]</span>

<span class=k>class</span> <span class=nc>PluginGeotribu</span><span class=p>:</span>

    <span class=p>[</span><span class=o>...</span><span class=p>]</span>

    <span class=c1># quelque part dans la fonction de définition du menu de notre plugin</span>
    <span class=k>def</span> <span class=nf>initGui</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>

        <span class=p>[</span><span class=o>...</span><span class=p>]</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>action_menu_help</span> <span class=o>=</span> <span class=n>QAction</span><span class=p>(</span>
<span class=hll>            <span class=n>QIcon</span><span class=p>(</span><span class=n>QgsApplication</span><span class=o>.</span><span class=n>iconPath</span><span class=p>(</span><span class=s2>&quot;mActionHelpContents.svg&quot;</span><span class=p>)),</span>
</span>            <span class=bp>self</span><span class=o>.</span><span class=n>tr</span><span class=p>(</span><span class=s2>&quot;Help&quot;</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;...&quot;</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>iface</span><span class=o>.</span><span class=n>mainWindow</span><span class=p>(),</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>iface</span><span class=o>.</span><span class=n>addPluginToMenu</span><span class=p>(</span><span class=s2>&quot;Le nom du plugin&quot;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>action_menu_help</span><span class=p>)</span>
</code></pre></div> <p>On obtient alors :</p> <p><img alt="menu plugin help" class=img-center src=https://cdn.geotribu.fr/img/tuto/qgis_plugin_embedded_images/pyqgis_menu_icons_help.png title="icône aide du menu"></p> <p>C'est déjà plus sympa et intégré non ?</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>De la même façon, il est aussi possible d'utiliser les ressources d'un autre plugin en adaptant le chemin avec le préfixe correspondant. Mais il faut pouvoir s'assurer que cet autre plugin soit toujours installé avec le nôtre (en l'indiquant comme dépendance par exemple).</p> </div> <p>Maintenant, vous n'avez plus aucune excuse pour ne pas mettre de belles icônes dans vos fenêtres et menus ! Avec modération bien sûr :wink:. Merci à <a href=https://twitter.com/etrimaille/ >Etienne</a> pour le rappel sur <a href=https://qgis.org/api/classQgsApplication.html#aeb52c5382784b9adbdf0e0328a7ea2ad><em>QgsApplication.iconPath</em></a> dont "l'avantage, c'est que ca gère le thème de QGIS (Dark, Grey or Normal)".</p> <p align=middle><a href=/articles/2021/2021-02-02_pyqgis_previsualiser_images_integrees/ class=md-button>Suggestion : prévisualiser les icônes intégrées :fontawesome-solid-step-forward:</a></p> <hr> <h2 id=auteur>Auteur<a class=headerlink href=#auteur title="Permanent link">#</a></h2> <h1 id=julien-moura>Julien Moura<a class=headerlink href=#julien-moura title="Permanent link">#</a></h1> <p><img alt="Portrait Julien Moura" class=img-rdp-news-thumb src=https://cdn.geotribu.fr/img/internal/contributeurs/jmou.jfif title="Portrait Julien Moura"></p> <p>Géographe "sigiste" de formation, j'ai d'abord travaillé sur différentes thématiques et types de structures : la gestion des déchets en milieu urbain à Madagascar, le foncier d'intérêt général auprès de <a href=http://www.epf-reunion.com/ >l'EPF de La Réunion</a>, l'organisation et la résilience urbaine face aux risques naturels à Lima pour l'IRD.</p> <p>C'est en m'intéressant à la gouvernance et à l'ouverture des données géographiques que je travaille à <a href=https://www.isogeo.com>Isogeo</a> quelques années. L'occasion d'asseoir mes compétences en développement et gestion de produit informatique. En 2020, je deviens indépendant (In Geo Veritas) puis rejoins les rangs d'<a href=https://oslandia.com/ >Oslandia</a>.</p> <p>Féru des dynamiques de contributions, je participe activement à Geotribu depuis fin 2011 et, comme ça me manquait trop, j'ai décidé de lancer sa renaissance en 2020.</p> </div> </div> </div> <hr> <footer class=container> <center><span class=copyleft>&copy;</span> Geotribu</center> <center>Documentation built with <a href=http://www.mkdocs.org>MkDocs</a> and <a href=http://kristopolous.github.io/BOOTSTRA.386>BOOTSTRA.386</a>.</center> </footer> <script src=../../../../../../theme/assets/javascripts/extra.js></script> <script src=https://cdn.jsdelivr.net/npm/wa-mediabox@1.0.1/dist/wa-mediabox.min.js></script> <script src=https://unpkg.com/mermaid@8.6.4/dist/mermaid.min.js></script> <script src=../../../../../../search/main.js></script> </body> </html>