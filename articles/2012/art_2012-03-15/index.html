<!DOCTYPE html><html lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=description content="Site indépendant de veille sur la géomatique libre et open source. Articles, tutoriels et revues de presse (#GeoRDP) sur l'information géographique, les SIG, la cartographie, la représentation des données..."><meta name=author content=Geotribu><link href=https://static.geotribu.fr/articles/2012/art_2012-03-15/ rel=canonical><link rel="shortcut icon" href=../../../img/favicon.ico><title>OpenStreetMap, la Réunion tout en couleur avec Corine Land Cover - Geotribu</title><link href=../../../css/bootstrap.min.css rel=stylesheet><link href=../../../css/font-awesome.min.css rel=stylesheet><link href=../../../css/bootstrap-theme.min.css rel=stylesheet><link href=../../../../../../theme/assets/stylesheets/extra.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/wa-mediabox@1.0.1/dist/wa-mediabox.min.css rel=stylesheet><!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.3/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]--><script src=../../../js/jquery-1.10.2.min.js></script><script src=../../../js/bootstrap.min.js></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'None', 'auto');
            ga('send', 'pageview');
        </script></head> <body> <div class="navbar navbar-default navbar-fixed-top" role=navigation> <div class=container> <div class=navbar-header> <button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=../../..>Geotribu</a> </div> <div class="navbar-collapse collapse"> <ul class="nav navbar-nav"> <li> <a href=../../..>&#127968; Accueil</a> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>Revues de presse <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../..>2021</a> </li> <li> <a href=../../..>2020</a> </li> <li> <a href=../../..>2017</a> </li> <li> <a href=../../..>2016</a> </li> <li> <a href=../../..>2015</a> </li> <li> <a href=../../..>2014</a> </li> <li> <a href=../../..>2013</a> </li> <li> <a href=../../..>2012</a> </li> <li> <a href=../../..>2011</a> </li> <li> <a href=../../..>2010</a> </li> </ul> </li> <li class="dropdown active"> <a href=# class=dropdown-toggle data-toggle=dropdown>Articles <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../..>2021</a> </li> <li> <a href=../../..>2020</a> </li> <li> <a href=../../..>2015</a> </li> <li> <a href=../../..>2014</a> </li> <li> <a href=../../..>2013</a> </li> <li class=active> <a href=../../..>2012</a> </li> <li> <a href=../../..>2011</a> </li> <li> <a href=../../..>2010</a> </li> <li> <a href=../../..>2009</a> </li> <li> <a href=../../..>2008</a> </li> </ul> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>Contribuer <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../contribuer/introduction/ >Contribuer à Geotribu</a> </li> <li> <a href=../../../contribuer/requirements/ >Prérequis pour la contribution</a> </li> <li> <a href=../../../contribuer/contribution_guide/ >Guide de contribution</a> </li> <li> <a href=../../..>Editer le contenu</a> </li> <li> <a href=../../..>Générer le site web</a> </li> <li> <a href=../../..>Guides de rédaction</a> </li> <li> <a href=../../..>Archives</a> </li> </ul> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>A propos <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../team/ >L'équipe Geotribu</a> </li> <li> <a href=../../../team/acha/ >Aurélien Chaumet</a> </li> <li> <a href=../../../team/avdc/ >Arnaud Vandecasteele</a> </li> <li> <a href=../../../team/avha/ >Adrien Van Hamme</a> </li> <li> <a href=../../../team/edel/ >Etienne Delay</a> </li> <li> <a href=../../../team/fbor/ >Florian Boret</a> </li> <li> <a href=../../../team/fgob/ >Fabien Goblet</a> </li> <li> <a href=../../../team/gdbo/ >Guillaume de Boyer</a> </li> <li> <a href=../../../team/jmou/ >Julien Moura</a> </li> <li> <a href=../../../team/jory/ >Jérémie Ory</a> </li> <li> <a href=../../../team/jpie/ >Julie Pierson</a> </li> <li> <a href=../../../team/mraj/ >Mathieu Rajerison</a> </li> <li> <a href=../../../team/pver/ >Pierre Vernier</a> </li> <li> <a href=../../../team/rbov/ >Rémi Bovard</a> </li> <li> <a href=../../../team/rqui/ >Rodolphe Quiédeville</a> </li> <li> <a href=../../../team/tgra/ >Thomas Gratier</a> </li> <li> <a href=../../..>Archives</a> </li> </ul> </li> </ul> <ul class="nav navbar-nav navbar-right"> <li> <a href=../art_2012-04-17/ rel=next> <i class="fa fa-arrow-left"></i> Previous </a> </li> <li> <a href=../art_2012-02-03/ rel=prev> Next <i class="fa fa-arrow-right"></i> </a> </li> <li> <a href=https://github.com/geotribu/website/ > geotribu/website </a> </li> </ul> </div> </div> </div> <div class=container> <div class=row> <div class=col-md-3><div class="bs-sidebar hidden-print affix well" role=complementary> <ul class="nav bs-sidenav"> <li class="main active"><a href=#openstreetmap-la-reunion-tout-en-couleur-avec-corine-land-cover>OpenStreetMap, la Réunion tout en couleur avec Corine Land Cover</a></li> <li><a href=#source-des-donnees>Source des données</a></li> <li><a href=#du-shapefile-a-osm>Du shapefile à OSM</a></li> <li class="main "><a href=#on-ajoute-automatiquement-la-source>On ajoute automatiquement la source</a></li> <li class="main "><a href=#on-ajoute-des-tags-en-fonction-de-la-valeur-du-champ>On ajoute des tags en fonction de la valeur du champ</a></li> <li><a href=#lavant-apres-clc>L'avant-après CLC</a></li> <li><a href=#auteur>Auteur</a></li> </ul> </div></div> <div class=col-md-9 role=main> <h1 id=openstreetmap-la-reunion-tout-en-couleur-avec-corine-land-cover>OpenStreetMap, la Réunion tout en couleur avec Corine Land Cover<a class=headerlink href=#openstreetmap-la-reunion-tout-en-couleur-avec-corine-land-cover title="Permanent link">#</a></h1> <p>:calendar: Date de publication initiale : 15 mars 2012</p> <p><strong>Mots-clés :</strong> OpenStreetMap | Corine Land Cover</p> <p><img alt=200px-Openstreetmap_logo.svg_.png src=http://geotribu.net/sites/default/files/Tuto/img/Blog/OSM/200px-Openstreetmap_logo.svg_.png>Cela fait maintenant un peu plus de trois ans que mon activité de contributeur d'OpenStreetMap se concentre sur une zone particulière de l'Océan Indien : l'Ile de la Réunion. Originaire de ce petit coin de paradis, j'avais à coeur de faire avancer ce projet de cartographie libre. Étant sur place au départ, je pouvais compter sur mon fidèle GPS. Mais en raison de mon expatriation professionnelle, il m'a fallu composer avec d'autres ressources. Heureusement, la possibilité d'accéder au cadastre me permet de continuer à enregistrer de nouvelles routes. Si le réseau commence à prendre forme, cela n'était pas le cas pour ce qui concerne l'occupation du territoire. La carte apparaissait donc un peu vide et cela ne représentait pas, à mon sens, la luxuriante végétation et les paysages changeants de l'île. De ce fait, comme cela avait <a href=http://wiki.openstreetmap.org/wiki/FR:Corine_Land_Cover>déjà été fait pour la métropole</a>, je me suis attelé à importer les données <a href=https://fr.wikipedia.org/wiki/Corine_Land_Cover>Corine Land Cover</a> (CLC). Je vous livre ici la méthode ainsi que les outils utilisés.</p> <h3 id=source-des-donnees>Source des données<a class=headerlink href=#source-des-donnees title="Permanent link">#</a></h3> <p>Première étape, trouver les données ! Un petit tour sur le site du <a href=http://clubgeomatique.agorah.com>club géomatique de la réunion</a> m'a permit de <a href=http://clubgeomatique.agorah.com/clubgeomatique/index.php/les-projets-reunionnais-lies-aux-sig-et-a-la-geomatique/401-corine-land-cover-reunion-2000-a-2006.html>trouver mon bonheur</a>. Néanmoins, celles-ci étant au format MapInfo, je ne pouvais les exploiter immédiatement. De plus, il me fallait également séparer dans des couches distinctes les thématiques que je désirais intégrer dans la base OpenStreetMap. Avec l'aide <a href=https://www.qgis.org/ >QGIS</a>, cette étape ne fut au final qu'une formalité. Je disposais alors d'autant de couches (au format shapefile) que de thématiques comme cela est spécifié dans le <a href=http://wiki.openstreetmap.org/wiki/WikiProject_France/Corine_Land_Cover/Nomenclature>Wiki CLC d'OSM</a>.</p> <h3 id=du-shapefile-a-osm>Du shapefile à OSM<a class=headerlink href=#du-shapefile-a-osm title="Permanent link">#</a></h3> <p>Maintenant que tout est en place, il me fallait un moyen de transformer mes fichiers , au format shapefile, en un format exploitable par <a href=http://josm.openstreetmap.de/ >JOSM</a>, l'éditeur OpenStreetMap que j'utilise. Après avoir testé quelques une <a href=http://wiki.openstreetmap.org/wiki/Import/Shapefile#Conversion_to_osm_format>des solutions listées</a> sur le wiki, je me suis tourné vers <a href=http://wiki.openstreetmap.org/wiki/Ogr2osm>OGR2OSM</a> qui m’apparaissait comme étant la plus souple et la plus simple à utiliser. Cet utilitaire en ligne de commande vous permet de transformer votre fichier shapefile en un fichier OSM au moyen de l'instruction suivante :</p> <p>python ogr2osm/ogr2osm.py my-shapefile.shp </p> <p>Jusque-là rien d'exceptionnel me direz-vous. Mais ce qui m'a complètement convaincu c'est la possibilité de spécifier un fichier python au sein duquel sera spécifié les modifications ou ajouts à apporter en fonction d'un attribut donné. Ce fichier prend en entrée la valeur du champ et retourne en sortie un dictionnaire dans lequel vous avez spécifié vos nouveaux attributs. Cette étape vous permet ainsi de convertir automatiquement les valeurs de votre shapefile en tag OpenStreetMap valides. Prenons par exemple. Le fichier de translation sera alors le suivant :</p> <p>def translateAttributes(attrs):<br> if not attrs: return</p> <p>tags = {}</p> <h1 id=on-ajoute-automatiquement-la-source>On ajoute automatiquement la source<a class=headerlink href=#on-ajoute-automatiquement-la-source title="Permanent link">#</a></h1> <p>tags.update({'source':'Union européenne - SOeS, CORINE Land Cover, 2006.'})<br> tags.update({'CLC:code': attrs['CODE_06'] })<br> tags.update({'CLC:id': attrs['ID'] })<br> tags.update({'CLC:year': '2006' })</p> <h1 id=on-ajoute-des-tags-en-fonction-de-la-valeur-du-champ>On ajoute des tags en fonction de la valeur du champ<a class=headerlink href=#on-ajoute-des-tags-en-fonction-de-la-valeur-du-champ title="Permanent link">#</a></h1> <p>if attrs['libelle_fr'] == 'Prairies' :<br> tags.update({'landuse': 'meadow' })</p> <p>return tags </p> <p>Et voilà, je me retrouve donc avec autant de fichier OSM que j'ai de thématiques Corine Land Cover. La dernière étape est l'import des données dans la base. Rien de plus avec JOSM. Visualisons maintenant le résultat obtenu.</p> <h3 id=lavant-apres-clc>L'avant-après CLC<a class=headerlink href=#lavant-apres-clc title="Permanent link">#</a></h3> <p>Quand je vous disais qu'elle était un peu triste notre carte OSM de la réunion. Ne préférez-vous pas ce joli camaïeu de vert ?</p> <p><img alt=avant_apres.png src=http://geotribu.net/sites/default/files/Tuto/img/Blog/divers/avant_apres.png></p> <hr> <h2 id=auteur>Auteur<a class=headerlink href=#auteur title="Permanent link">#</a></h2> <p><img alt="Portait de GeoTribu" class=img-rdp-news-thumb src=https://cdn.geotribu.fr/img/internal/charte/geotribu_logo_64x64.png> <strong>GeoTribu</strong></p> <p>Toute l'actualité de la géomatique Open Source ! Mais aussi des tutoriels, des billets de blog, des tests et surtout une bonne humeur géographique !</p></div> </div> </div> <hr> <footer class=container> <center><span class=copyleft>&copy;</span> Geotribu</center> <center>Documentation built with <a href=http://www.mkdocs.org>MkDocs</a> and <a href=http://kristopolous.github.io/BOOTSTRA.386>BOOTSTRA.386</a>.</center> </footer> <script src=../../../../../../theme/assets/javascripts/extra.js></script> <script src=https://cdn.jsdelivr.net/npm/wa-mediabox@1.0.1/dist/wa-mediabox.min.js></script> <script src=https://unpkg.com/mermaid@8.6.4/dist/mermaid.min.js></script> <script src=../../../../../../search/main.js></script> </body> </html>