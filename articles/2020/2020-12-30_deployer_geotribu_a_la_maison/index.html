<!DOCTYPE html><html lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=description content="Site indépendant de veille sur la géomatique libre et open source. Articles, tutoriels et revues de presse (#GeoRDP) sur l'information géographique, les SIG, la cartographie, la représentation des données..."><meta name=author content=Geotribu><link href=https://static.geotribu.fr/articles/2020/2020-12-30_deployer_geotribu_a_la_maison/ rel=canonical><link rel="shortcut icon" href=../../../img/favicon.ico><title>Geotribu à la maison - Geotribu</title><link href=../../../css/bootstrap.min.css rel=stylesheet><link href=../../../css/font-awesome.min.css rel=stylesheet><link href=../../../css/bootstrap-theme.min.css rel=stylesheet><link href=../../../../../../theme/assets/stylesheets/extra.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/wa-mediabox@1.0.1/dist/wa-mediabox.min.css rel=stylesheet><!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.3/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]--><script src=../../../js/jquery-1.10.2.min.js></script><script src=../../../js/bootstrap.min.js></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'None', 'auto');
            ga('send', 'pageview');
        </script></head> <body> <div class="navbar navbar-default navbar-fixed-top" role=navigation> <div class=container> <div class=navbar-header> <button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=../../..>Geotribu</a> </div> <div class="navbar-collapse collapse"> <ul class="nav navbar-nav"> <li> <a href=../../..>&#127968; Accueil</a> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>Revues de presse <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../..>2021</a> </li> <li> <a href=../../..>2020</a> </li> <li> <a href=../../..>2017</a> </li> <li> <a href=../../..>2016</a> </li> <li> <a href=../../..>2015</a> </li> <li> <a href=../../..>2014</a> </li> <li> <a href=../../..>2013</a> </li> <li> <a href=../../..>2012</a> </li> <li> <a href=../../..>2011</a> </li> <li> <a href=../../..>2010</a> </li> </ul> </li> <li class="dropdown active"> <a href=# class=dropdown-toggle data-toggle=dropdown>Articles <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../..>2021</a> </li> <li class=active> <a href=../../..>2020</a> </li> <li> <a href=../../..>2015</a> </li> <li> <a href=../../..>2014</a> </li> <li> <a href=../../..>2013</a> </li> <li> <a href=../../..>2012</a> </li> <li> <a href=../../..>2011</a> </li> <li> <a href=../../..>2010</a> </li> <li> <a href=../../..>2009</a> </li> <li> <a href=../../..>2008</a> </li> </ul> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>Contribuer <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../contribuer/introduction/ >Contribuer à Geotribu</a> </li> <li> <a href=../../../contribuer/requirements/ >Prérequis pour la contribution</a> </li> <li> <a href=../../../contribuer/contribution_guide/ >Guide de contribution</a> </li> <li> <a href=../../..>Editer le contenu</a> </li> <li> <a href=../../..>Générer le site web</a> </li> <li> <a href=../../..>Guides de rédaction</a> </li> <li> <a href=../../..>Archives</a> </li> </ul> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>A propos <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../team/ >L'équipe Geotribu</a> </li> <li> <a href=../../../team/acha/ >Aurélien Chaumet</a> </li> <li> <a href=../../../team/avdc/ >Arnaud Vandecasteele</a> </li> <li> <a href=../../../team/avha/ >Adrien Van Hamme</a> </li> <li> <a href=../../../team/edel/ >Etienne Delay</a> </li> <li> <a href=../../../team/fbor/ >Florian Boret</a> </li> <li> <a href=../../../team/fgob/ >Fabien Goblet</a> </li> <li> <a href=../../../team/gdbo/ >Guillaume de Boyer</a> </li> <li> <a href=../../../team/jmou/ >Julien Moura</a> </li> <li> <a href=../../../team/jory/ >Jérémie Ory</a> </li> <li> <a href=../../../team/jpie/ >Julie Pierson</a> </li> <li> <a href=../../../team/mraj/ >Mathieu Rajerison</a> </li> <li> <a href=../../../team/pver/ >Pierre Vernier</a> </li> <li> <a href=../../../team/rbov/ >Rémi Bovard</a> </li> <li> <a href=../../../team/rqui/ >Rodolphe Quiédeville</a> </li> <li> <a href=../../../team/tgra/ >Thomas Gratier</a> </li> <li> <a href=../../..>Archives</a> </li> </ul> </li> </ul> <ul class="nav navbar-nav navbar-right"> <li> <a href=../../2021/2021-01-04_bilan_2020_perspectives_2021/ rel=next> <i class="fa fa-arrow-left"></i> Previous </a> </li> <li> <a href=../2020-11-21_openstreetmap_street_complete/ rel=prev> Next <i class="fa fa-arrow-right"></i> </a> </li> <li> <a href=https://github.com/geotribu/website/ > geotribu/website </a> </li> </ul> </div> </div> </div> <div class=container> <div class=row> <div class=col-md-3><div class="bs-sidebar hidden-print affix well" role=complementary> <ul class="nav bs-sidenav"> <li class="main active"><a href=#toi-aussi-deploie-le-site-geotribu-chez-toi>Toi aussi, déploie le site Geotribu chez toi</a></li> <li><a href=#intro>Intro</a></li> <li><a href=#1-telecharger-le-site-de-production>1. Télécharger le site de production</a></li> <li><a href=#2-servir-le-site>2. Servir le site</a></li> <li><a href=#auteur>Auteur</a></li> <li class="main "><a href=#julien-moura>Julien Moura</a></li> </ul> </div></div> <div class=col-md-9 role=main> <h1 id=toi-aussi-deploie-le-site-geotribu-chez-toi>Toi aussi, déploie le site Geotribu chez toi<a class=headerlink href=#toi-aussi-deploie-le-site-geotribu-chez-toi title="Permanent link">#</a></h1> <p>:calendar: Date de publication initiale : 30 décembre 2020</p> <p><strong>Mots-clés :</strong> web | Geotribu</p> <p>Pré-requis : une connexion internet.</p> <h2 id=intro>Intro<a class=headerlink href=#intro title="Permanent link">#</a></h2> <p><img alt="icône matière" class=img-rdp-news-thumb src=https://cdn.geotribu.fr/img/internal/icons-rdp-news/matiere.png title=matière></p> <p>A l'instar de nombreux sites webs, Geotribu est un site statique, cela signifie :</p> <ul> <li>qu'il n'y a pas de base de données,</li> <li>que les appels au serveur web ne sont que des <code>GET</code></li> <li>que ce dernier ne fait que retourner des fichiers HTML, CSS, JavaScript et les éventuels contenus binaires (images...).</li> </ul> <p>C'est un gage de plein de mots-clés : légèreté, réactivité, faible maintenance, bonne résilience et sécurité.</p> <p>Mais c'est surtout un bon moyen de jouer avec un site web sans se casser la tête !</p> <p align=middle><a class=md-button href=#__comments>Commenter cet article :fontawesome-solid-comments:</a></p> <p>Pour mieux se rendre compte de la légèreté et de la facilité des sites statiques, faisons un exercice simple de mise en pratique : <strong>déployons le site actuel de Geotribu sur notre ordinateur en 2 étapes</strong>.</p> <h2 id=1-telecharger-le-site-de-production>1. Télécharger le site de production<a class=headerlink href=#1-telecharger-le-site-de-production title="Permanent link">#</a></h2> <p>Commençons par télécharger <a href=https://github.com/geotribu/website/archive/gh-pages.zip>la dernière version du site en production</a> et dézipper le tout.</p> <p>Pour les personnes facturées au clic sur les interfaces graphiques, voici la petite commande qui va bien :</p> <div class=tabbed-set data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><label for=__tabbed_1_1>Bash</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=nb>cd</span> /tmp <span class=se>\</span>
    <span class=o>&amp;&amp;</span> wget -N -c https://github.com/geotribu/website/archive/gh-pages.zip -O geotribu_website_prod.zip <span class=se>\</span>
    <span class=o>&amp;&amp;</span> unzip -o -q geotribu_website_prod.zip <span class=se>\</span>
    <span class=o>&amp;&amp;</span> <span class=nb>cd</span> website-gh-pages <span class=se>\</span>
    <span class=o>&amp;&amp;</span> nautilus .
</code></pre></div> </div> <input id=__tabbed_1_2 name=__tabbed_1 type=radio><label for=__tabbed_1_2>Powershell</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=nb>Set-Location</span> <span class=n>-Path</span> <span class=s2>&quot;$env:TEMP&quot;</span><span class=p>;</span> <span class=p>`</span>
<span class=nb>Invoke-WebRequest</span> <span class=n>-Uri</span> <span class=s2>&quot;https://github.com/geotribu/website/archive/gh-pages.zip&quot;</span> <span class=n>-OutFile</span> <span class=n>geotribu_website_prod</span><span class=p>.</span><span class=n>zip</span> <span class=p>;`</span>
<span class=nb>Expand-Archive</span> <span class=n>-Path</span> <span class=n>geotribu_website_prod</span><span class=p>.</span><span class=n>zip</span> <span class=n>-DestinationPath</span> <span class=p>.</span> <span class=n>-Force</span> <span class=p>;`</span>
<span class=nb>cd </span><span class=n>website-gh-pages</span> <span class=p>;</span>
<span class=n>explorer</span> <span class=p>.</span>
</code></pre></div> </div> </div> <p>On peut déjà observer que le site ne pèse que ~25 Mo compressé et ~110 Mo décompressé, pour un contenu de presque 600 pages (articles, revues de presse, guides de contribution, pages d'équipe, etc.). Et encore, le fichier d'index de la recherche (<code>search/search_index.json</code>) pèse à lui seul près de 50 Mo.</p> <div class=highlight><pre><span></span><code>jmo@jmoslandia:/tmp/website-gh-pages$ ls -al .
total <span class=m>496</span>
drwxrwxr-x <span class=m>14</span> jmo  jmo    <span class=m>4096</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 .
drwxrwxrwt <span class=m>30</span> root root  <span class=m>12288</span> déc.  <span class=m>30</span> <span class=m>13</span>:06 ..
-rw-rw-r--  <span class=m>1</span> jmo  jmo  <span class=m>143384</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 <span class=m>404</span>.html
drwxrwxr-x  <span class=m>2</span> jmo  jmo    <span class=m>4096</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 acknowledgements
drwxrwxr-x <span class=m>12</span> jmo  jmo    <span class=m>4096</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 articles
drwxrwxr-x  <span class=m>5</span> jmo  jmo    <span class=m>4096</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 assets
-rw-rw-r--  <span class=m>1</span> jmo  jmo      <span class=m>19</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 CNAME
drwxrwxr-x  <span class=m>9</span> jmo  jmo    <span class=m>4096</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 contribuer
drwxrwxr-x  <span class=m>2</span> jmo  jmo    <span class=m>4096</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 dicogis
-rw-rw-r--  <span class=m>1</span> jmo  jmo   <span class=m>42105</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 feed_rss_created.xml
-rw-rw-r--  <span class=m>1</span> jmo  jmo   <span class=m>40284</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 feed_rss_updated.xml
-rw-rw-r--  <span class=m>1</span> jmo  jmo  <span class=m>102918</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 index.html
drwxrwxr-x  <span class=m>2</span> jmo  jmo    <span class=m>4096</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 install_webapp
-rw-rw-r--  <span class=m>1</span> jmo  jmo     <span class=m>442</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 manifest.webmanifest
drwxrwxr-x <span class=m>14</span> jmo  jmo    <span class=m>4096</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 node
-rw-rw-r--  <span class=m>1</span> jmo  jmo       <span class=m>0</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 .nojekyll
drwxrwxr-x <span class=m>13</span> jmo  jmo    <span class=m>4096</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 rdp
-rw-rw-r--  <span class=m>1</span> jmo  jmo      <span class=m>97</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 robots.txt
drwxrwxr-x  <span class=m>2</span> jmo  jmo    <span class=m>4096</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 rss
-rw-rw-r--  <span class=m>1</span> jmo  jmo     <span class=m>116</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 rss.xml
drwxrwxr-x  <span class=m>2</span> jmo  jmo    <span class=m>4096</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 search
-rw-rw-r--  <span class=m>1</span> jmo  jmo   <span class=m>81602</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 sitemap.xml
-rw-rw-r--  <span class=m>1</span> jmo  jmo    <span class=m>2656</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 sitemap.xml.gz
drwxrwxr-x <span class=m>16</span> jmo  jmo    <span class=m>4096</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 team
drwxrwxr-x  <span class=m>3</span> jmo  jmo    <span class=m>4096</span> déc.  <span class=m>29</span> <span class=m>19</span>:39 theme
jmo@jmoslandia:/tmp/website-gh-pages$ du -sh .
112M    .
jmo@jmoslandia:/tmp/website-gh-pages$ du -sh search/
47M search/
</code></pre></div> <p>Evidemment, ce dossier ne contient pas les images, hébergées sur un <a href=/contribuer/guides/image/#heberger-une-image-sur-le-cdn-de-geotribu>serveur à part</a> et sauvegardées mensuellement en tant que release sur GitHub. A titre d'exemple, <a href=https://github.com/geotribu/website/releases/download/2020.11/bkp_cdn_2020-11-11.tar.gz>la sauvegarde de novembre pèse 422 Mo</a>.</p> <p align=middle><a data-mediabox=lightbox-gallery data-title="Quand je vous disais que c'est Léger !" href=https://cdn.geotribu.fr/img/articles-blog-rdp/divers/fernand_leger_constructeurs.jpg><img alt="Fernand Léger - Les constructeurs" loading=lazy src=https://cdn.geotribu.fr/img/articles-blog-rdp/divers/fernand_leger_constructeurs.jpg title="Quand je vous disais que c'est Léger !"></a></p> <h2 id=2-servir-le-site>2. Servir le site<a class=headerlink href=#2-servir-le-site title="Permanent link">#</a></h2> <p>En ouvrant simplement le fichier <code>index.html</code>, on voit déjà apparaître la page d'accueil dans son navigateur par défaut. Mais le site étant configuré pour avoir des URLs correspondant au titre de la page sans l'extension <code>.html</code>, la navigation n'est donc pas fonctionnelle, le <a href=https://developer.mozilla.org/fr/docs/Apprendre/Ouvrir_un_fichier_dans_un_navigateur_web#Ouvrir_un_fichier_local>navigateur se comportant davantage comme un explorateur de fichiers</a>.</p> <p align=middle><a data-mediabox=lightbox-gallery data-title="Consulter le site sur Firefox sans serveur web" href=https://cdn.geotribu.fr/img/tuto/static_web/static_web_browser_as_file_explorer.webp><img alt="Le site sans serveur web" loading=lazy src=https://cdn.geotribu.fr/img/tuto/static_web/static_web_browser_as_file_explorer.webp title="Consulter le site sur Firefox sans serveur web"></a></p> <p>Si on veut avoir le site pleinement fonctionnel, il suffit donc de "servir" le dossier par un... serveur web :clap:. Parce-que déployer un serveur web n'est pas du tout le sujet, utilisons les outils minimalistes intégrés à de nombreux langages :</p> <div class=tabbed-set data-tabs=2:2><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><label for=__tabbed_2_1>Python 3+</label><div class=tabbed-content> <p>Avec bash :</p> <div class=highlight><pre><span></span><code>$ python3 -m http.server <span class=m>8085</span>
Serving HTTP on <span class=m>0</span>.0.0.0 port <span class=m>8085</span> <span class=o>(</span>http://0.0.0.0:8085/<span class=o>)</span> ...
</code></pre></div> <p>Avec Powershell : <div class=highlight><pre><span></span><code><span class=nb>PS </span><span class=p>&gt;</span> <span class=n>py</span> <span class=p>-</span><span class=n>3</span> <span class=n>-m</span> <span class=n>http</span><span class=p>.</span><span class=n>server</span> <span class=n>8085</span>
<span class=n>Serving</span> <span class=n>HTTP</span> <span class=n>on</span> <span class=n>0</span><span class=p>.</span><span class=n>0</span><span class=p>.</span><span class=n>0</span><span class=p>.</span><span class=n>0</span> <span class=n>port</span> <span class=n>8085</span> <span class=p>(</span><span class=n>http</span><span class=err>:</span><span class=p>//</span><span class=n>0</span><span class=p>.</span><span class=n>0</span><span class=p>.</span><span class=n>0</span><span class=p>.</span><span class=n>0</span><span class=err>:</span><span class=n>8085</span><span class=p>/)</span> <span class=p>...</span>
</code></pre></div></p> </div> <input id=__tabbed_2_2 name=__tabbed_2 type=radio><label for=__tabbed_2_2>Node 12+</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>$ npx serve -l <span class=m>8085</span>
npx : <span class=m>78</span> installé<span class=o>(</span>s<span class=o>)</span> en <span class=m>3</span>.27s

┌──────────────────────────────────────────────────┐
│                                                  │
│   Serving!                                       │
│                                                  │
│   - Local:            http://localhost:8085      │
│   - On Your Network:  http://192.168.1.25:8085   │
│                                                  │
│   Copied <span class=nb>local</span> address to clipboard!             │
│                                                  │
└──────────────────────────────────────────────────┘
</code></pre></div> </div> </div> <p>Ouvrir le navigateur sur l'adresse <a href=http://localhost:8085>http://localhost:8085</a> et vous devriez avoir le site en local, pleinement fonctionnel. Si les images n'apparaissent pas, c'est que vous n'accédez pas à <a href=https://cdn.geotribu.fr>https://cdn.geotribu.fr</a>.</p> <p>Et voilà, vous avez le site Geotribu sur votre ordinateur :smile: !</p> <hr> <h2 id=auteur>Auteur<a class=headerlink href=#auteur title="Permanent link">#</a></h2> <h1 id=julien-moura>Julien Moura<a class=headerlink href=#julien-moura title="Permanent link">#</a></h1> <p><img alt="Portrait Julien Moura" class=img-rdp-news-thumb src=https://cdn.geotribu.fr/img/internal/contributeurs/jmou.jfif title="Portrait Julien Moura"></p> <p>Géographe "sigiste" de formation, j'ai d'abord travaillé sur différentes thématiques et types de structures : la gestion des déchets en milieu urbain à Madagascar, le foncier d'intérêt général auprès de <a href=http://www.epf-reunion.com/ >l'EPF de La Réunion</a>, l'organisation et la résilience urbaine face aux risques naturels à Lima pour l'IRD.</p> <p>C'est en m'intéressant à la gouvernance et à l'ouverture des données géographiques que je travaille à <a href=https://www.isogeo.com>Isogeo</a> quelques années. L'occasion d'asseoir mes compétences en développement et gestion de produit informatique. En 2020, je deviens indépendant (In Geo Veritas) puis rejoins les rangs d'<a href=https://oslandia.com/ >Oslandia</a>.</p> <p>Féru des dynamiques de contributions, je participe activement à Geotribu depuis fin 2011 et, comme ça me manquait trop, j'ai décidé de lancer sa renaissance en 2020.</p></div> </div> </div> <hr> <footer class=container> <center><span class=copyleft>&copy;</span> Geotribu</center> <center>Documentation built with <a href=http://www.mkdocs.org>MkDocs</a> and <a href=http://kristopolous.github.io/BOOTSTRA.386>BOOTSTRA.386</a>.</center> </footer> <script src=../../../../../../theme/assets/javascripts/extra.js></script> <script src=https://cdn.jsdelivr.net/npm/wa-mediabox@1.0.1/dist/wa-mediabox.min.js></script> <script src=https://unpkg.com/mermaid@8.6.4/dist/mermaid.min.js></script> <script src=../../../../../../search/main.js></script> </body> </html>