<!DOCTYPE html><html lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=description content="Site indépendant de veille sur la géomatique libre et open source. Articles, tutoriels et revues de presse (#GeoRDP) sur l'information géographique, les SIG, la cartographie, la représentation des données..."><meta name=author content=Geotribu><link href=https://static.geotribu.fr/articles/2010/art_2010-08-25/ rel=canonical><link rel="shortcut icon" href=../../../img/favicon.ico><title>Interroger GeoServer en Python grâce à gsconfig - Geotribu</title><link href=../../../css/bootstrap.min.css rel=stylesheet><link href=../../../css/font-awesome.min.css rel=stylesheet><link href=../../../css/bootstrap-theme.min.css rel=stylesheet><link href=../../../../../../theme/assets/stylesheets/extra.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/wa-mediabox@1.0.1/dist/wa-mediabox.min.css rel=stylesheet><!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.3/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]--><script src=../../../js/jquery-1.10.2.min.js></script><script src=../../../js/bootstrap.min.js></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'None', 'auto');
            ga('send', 'pageview');
        </script></head> <body> <div class="navbar navbar-default navbar-fixed-top" role=navigation> <div class=container> <div class=navbar-header> <button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=../../..>Geotribu</a> </div> <div class="navbar-collapse collapse"> <ul class="nav navbar-nav"> <li> <a href=../../..>&#127968; Accueil</a> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>Revues de presse <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../..>2021</a> </li> <li> <a href=../../..>2020</a> </li> <li> <a href=../../..>2017</a> </li> <li> <a href=../../..>2016</a> </li> <li> <a href=../../..>2015</a> </li> <li> <a href=../../..>2014</a> </li> <li> <a href=../../..>2013</a> </li> <li> <a href=../../..>2012</a> </li> <li> <a href=../../..>2011</a> </li> <li> <a href=../../..>2010</a> </li> </ul> </li> <li class="dropdown active"> <a href=# class=dropdown-toggle data-toggle=dropdown>Articles <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../..>2021</a> </li> <li> <a href=../../..>2020</a> </li> <li> <a href=../../..>2015</a> </li> <li> <a href=../../..>2014</a> </li> <li> <a href=../../..>2013</a> </li> <li> <a href=../../..>2012</a> </li> <li> <a href=../../..>2011</a> </li> <li class=active> <a href=../../..>2010</a> </li> <li> <a href=../../..>2009</a> </li> <li> <a href=../../..>2008</a> </li> </ul> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>Contribuer <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../contribuer/introduction/ >Contribuer à Geotribu</a> </li> <li> <a href=../../../contribuer/requirements/ >Prérequis pour la contribution</a> </li> <li> <a href=../../../contribuer/contribution_guide/ >Guide de contribution</a> </li> <li> <a href=../../..>Editer le contenu</a> </li> <li> <a href=../../..>Générer le site web</a> </li> <li> <a href=../../..>Guides de rédaction</a> </li> <li> <a href=../../..>Archives</a> </li> </ul> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>A propos <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../team/ >L'équipe Geotribu</a> </li> <li> <a href=../../../team/acha/ >Aurélien Chaumet</a> </li> <li> <a href=../../../team/avdc/ >Arnaud Vandecasteele</a> </li> <li> <a href=../../../team/avha/ >Adrien Van Hamme</a> </li> <li> <a href=../../../team/edel/ >Etienne Delay</a> </li> <li> <a href=../../../team/fbor/ >Florian Boret</a> </li> <li> <a href=../../../team/fgob/ >Fabien Goblet</a> </li> <li> <a href=../../../team/gdbo/ >Guillaume de Boyer</a> </li> <li> <a href=../../../team/jmou/ >Julien Moura</a> </li> <li> <a href=../../../team/jory/ >Jérémie Ory</a> </li> <li> <a href=../../../team/jpie/ >Julie Pierson</a> </li> <li> <a href=../../../team/mraj/ >Mathieu Rajerison</a> </li> <li> <a href=../../../team/pver/ >Pierre Vernier</a> </li> <li> <a href=../../../team/rbov/ >Rémi Bovard</a> </li> <li> <a href=../../../team/rqui/ >Rodolphe Quiédeville</a> </li> <li> <a href=../../../team/tgra/ >Thomas Gratier</a> </li> <li> <a href=../../..>Archives</a> </li> </ul> </li> </ul> <ul class="nav navbar-nav navbar-right"> <li> <a href=../art_2010-09-03/ rel=next> <i class="fa fa-arrow-left"></i> Previous </a> </li> <li> <a href=../art_2010-08-18/ rel=prev> Next <i class="fa fa-arrow-right"></i> </a> </li> <li> <a href=https://github.com/geotribu/website/ > geotribu/website </a> </li> </ul> </div> </div> </div> <div class=container> <div class=row> <div class=col-md-3><div class="bs-sidebar hidden-print affix well" role=complementary> <ul class="nav bs-sidenav"> <li class="main active"><a href=#interroger-geoserver-en-python-grace-a-gsconfig>Interroger GeoServer en Python grâce à gsconfig</a></li> <li><a href=#1-jouer-en-toute-securite-grace-a-virtualenv>1 - Jouer en toute sécurité grâce à Virtualenv</a></li> <li><a href=#2-interroger-geoserver-en-python-grace-a-gsconfig>2 -Interroger GeoServer en Python grâce à gsconfig</a></li> <li><a href=#auteur>Auteur</a></li> </ul> </div></div> <div class=col-md-9 role=main> <h1 id=interroger-geoserver-en-python-grace-a-gsconfig>Interroger GeoServer en Python grâce à gsconfig<a class=headerlink href=#interroger-geoserver-en-python-grace-a-gsconfig title="Permanent link">#</a></h1> <p>:calendar: Date de publication initiale : 25 août 2010</p> <p><strong>Mots-clés :</strong> GeoServer | OpenSource | Python | Serveur cartographique</p> <p><img alt=logo.png src=http://geotribu.net/sites/default/files/Tuto/img/Blog/geoserver/GeoServer_logo.png> Comme vous l'avez surement remarqué, je ne suis pas un grand fan de Java. Le fait est que je trouve ce langage trop verbeux et vraiment compliqué à prendre en main. C'est pourquoi quand je suis tombé sur, <a href=http://wiki.github.com/dwins/gsconfig.py/ >gsconfig</a>, une librairie python permettant via le protocole <a href=https://fr.wikipedia.org/wiki/Representational_State_Transfer>REST</a> de dialoguer avec GeoServer, j'ai de suite été emballé.</p> <p>Au cours de ce billet, nous aborderons deux sujets principaux. Tout d'abord la création d'un environnement virtuel afin de ne pas "polluer" nos dépôts sources. Ensuite l'installation et l'utilisation de gsconfig</p> <h3 id=1-jouer-en-toute-securite-grace-a-virtualenv>1 - Jouer en toute sécurité grâce à Virtualenv<a class=headerlink href=#1-jouer-en-toute-securite-grace-a-virtualenv title="Permanent link">#</a></h3> <h4 id=installation-de-virtualenv>Installation de virtualenv<a class=headerlink href=#installation-de-virtualenv title="Permanent link">#</a></h4> <p>L'une des (nombreuses) raisons pour laquelle j'aime python, est la liberté offerte par ce langage. Ne vous est-il jamais arrivé de vouloir utiliser une même application mais sous des versions différentes, d'installer une librairie python encore en développement pour faire des tests sans corrompre tout votre système ? Avec une architecture classique cela est impossible. Pour remédier à cela, Python offre une alternative des plus intéressantes, les environnements virtuels.</p> <p>Ces derniers permettent tout simplement de disposer d'une sorte de boite virtuelle au sein de laquelle vous pouvez installer localement les librairies que vous ne souhaitez pas avoir dans votre système global. L'énorme avantage est que vous n'avez pas besoin d'installer un système complet. En effet les librairies installées dans votre système global restent utilisables localement. J'arrêterai là les explications, mais si vous souhaitez en savoir davantage, je vous renvoie vers les billets de <a href=http://clemesha.org/blog/2009/jul/05/modern-python-hacker-tools-virtualenv-fabric-pip/ >clemesha</a> et de l'incontournable <a href=http://sgillies.net/blog/1012/bootstrapping-a-python-project/ >sgillies</a></p> <p>Passons maintenant à la pratique. Il est bien évidemment nécessaire, dans un premier temps, d'installer virtualenv. Ubuntu faisant les choses bien, il est disponible dans les dépôts. Par Synaptic ou par un apt-get commencez par installer python-virtualenv. Puisque nous y sommes, installez également git-core. Cela nous servira à télécharger gsconfig qui utilise le système de version <a href=https://fr.wikipedia.org/wiki/Git>Git</a>.</p> <h4 id=creation-dun-environnement-virtuel>Création d'un environnement virtuel<a class=headerlink href=#creation-dun-environnement-virtuel title="Permanent link">#</a></h4> <p>Cela réalisé, il ne nous reste plus qu'à créer concrètement notre environnement virtuel. Cela se fait via un terminal, mais rassurez-vous, vous n'aurez en tout et pour tout que deux lignes à taper ! Commencez par vous placer à l'endroit où vous souhaitez créer votre nouvel environnement. Vous pouvez le faire où vous souhaitez, mais je vous conseille de créer un répertoire spécifique. En terme d'organisation cela sera tout de même plus simple. Ensuite, il vous suffit simplement de taper la ligne de commande virtualenv suivi du nom que vous souhaitez :</p> <p>user@osgeolive:~/App/geo$ virtualenv gsconfig-virtual<br> New python executable in gsconfig-virtual/bin/python<br> Installing setuptools............done. </p> <p>Voilà votre nouvel environnement est créé mais pas encore actif. Pour cela il est nécessaire, après s'être rendu dans votre nouvel environnement, de spécifier la source de la manière suivante :</p> <p>user@osgeolive:~/App/geo$ cd gsconfig-virtual/<br> user@osgeolive:~/App/geo/gsconfig-virtual$ source bin/activate<br> (gsconfig-virtual)user@osgeolive:~/App/geo/gsconfig-virtual$ </p> <p>Comme vous l'avez certainement remarqué, la dernière ligne de mon terminal a changé. Elle est précédée de (gsconfig-virtual) signe que je suis bien maintenant dans un environnement virtuel. Nous sommes prêt maintenant à installer gsconfig.</p> <h3 id=2-interroger-geoserver-en-python-grace-a-gsconfig>2 -Interroger GeoServer en Python grâce à gsconfig<a class=headerlink href=#2-interroger-geoserver-en-python-grace-a-gsconfig title="Permanent link">#</a></h3> <h4 id=installation-de-gsconfig>Installation de gsconfig<a class=headerlink href=#installation-de-gsconfig title="Permanent link">#</a></h4> <p>Au sein de votre nouvel environnement virtuel, vous disposez de trois répertoires : bin, include et lib. Rendez-vous dans le répertoire bin et lancez la commande ci-dessous qui va télécharger gsconfig.</p> <p>(gsconfig-virtual)user@osgeolive:~/App/geo/gsconfig-virtual/gsconfig-virtual/gsconfig-virtual/bin$ git clone <a href=http://github.com/dwins/gsconfig.py.git>http://github.com/dwins/gsconfig.py.git</a> </p> <p>Une fois le téléchargement terminé, il ne vous reste plus qu'à installer gsconfig :</p> <p>(gsconfig-virtual)user@osgeolive:~/App/geo/gsconfig-virtual/bin$ cd gsconfig.py<br> (gsconfig-virtual)user@osgeolive:~/App/geo/gsconfig-virtual/bin/gsconfig.py$ python setup.py install </p> <p>Ma première tentative d'installation s'est soldée par un échec en raison de l'absence de la librairie httplib2. Rien de très grave rassurez-vous. Si c'est également votre cas, téléchargeons-la immédiatement et relançons l'installation.</p> <p>(gsconfig-virtual)user@osgeolive:~/App/geo/gsconfig-virtual$ easy_install httplib2<br> (gsconfig-virtual)user@osgeolive:~/App/geo/gsconfig-virtual$ cd bin/gsconfig.py<br> (gsconfig-virtual)user@osgeolive:~/App/geo/gsconfig-virtual/bin/gsconfig.py$ python setup.py install<br> ...<br> Using /home/user/App/geo/gsconfig-virtual/lib/python2.6/site-packages/httplib2-0.6.0-py2.6.egg<br> Finished processing dependencies for gsconfig.py==1.0 </p> <p>Et voilà le tour est joué, l'installation est terminée.</p> <h4 id=utilisation-de-gsconfig>Utilisation de gsconfig<a class=headerlink href=#utilisation-de-gsconfig title="Permanent link">#</a></h4> <p>Maintenant que toute notre infrastructure est en place, utilisons immédiatement gsconfig. Mais avant toute chose, il est nécessaire de démarrer GeoServer. En effet, gsconfig va dialoguer avec notre serveur cartographique via le protocole Rest. Une fois cela réalisé, il suffit dans votre environnement virtuel de lancer un interpréteur python. Nous allons ensuite importer la librairie et effectuer quelques tests :</p> <blockquote> <blockquote> <blockquote> <p>from geoserver.catalog import Catalog<br> cat = Catalog("http://localhost:8082/geoserver/rest")<br> cat.get_layers()<br> [Layer[giant_polygon], Layer[poi], Layer[poly_landmarks], Layer[tiger_roads], Layer[Pk50095], Layer[Img_Sample], Layer[mosaic], Layer[Arc_Sample], Layer[tasmania_cities], Layer[tasmania_roads], Layer[tasmania_water_bodies], Layer[tasmania_state_boundaries], Layer[states], Layer[sfdem], Layer[bugsites], Layer[restricted], Layer[archsites], Layer[roads], Layer[streams]] </p> </blockquote> </blockquote> </blockquote> <p>Imaginons que nous souhaitons en connaitre davantage à propos de la couche states :</p> <blockquote> <blockquote> <blockquote> <p>states = cat.get_layer('states')<br> states.href<br> 'http://localhost:8082/geoserver/rest/layers/states.xml'<br> states.name<br> 'states'<br> states.styles<br> [Style[polygon], Style[pophatch]] </p> </blockquote> </blockquote> </blockquote> <p>De la même manière si nous souhaitons connaitre les workspaces disponibles :</p> <blockquote> <blockquote> <blockquote> <p>cat.get_workspaces()<br> [it.geosolutions @ <a href=http://localhost:8082/geoserver/rest/workspaces/it.geosolutions.xml>http://localhost:8082/geoserver/rest/workspaces/it.geosolutions.xml</a>, cite @ <a href=http://localhost:8082/geoserver/rest/workspaces/cite.xml>http://localhost:8082/geoserver/rest/workspaces/cite.xml</a>, tiger @ <a href=http://localhost:8082/geoserver/rest/workspaces/tiger.xml>http://localhost:8082/geoserver/rest/workspaces/tiger.xml</a>, sde @ <a href=http://localhost:8082/geoserver/rest/workspaces/sde.xml>http://localhost:8082/geoserver/rest/workspaces/sde.xml</a>, topp @ <a href=http://localhost:8082/geoserver/rest/workspaces/topp.xml>http://localhost:8082/geoserver/rest/workspaces/topp.xml</a>, sf @ <a href=http://localhost:8082/geoserver/rest/workspaces/sf.xml>http://localhost:8082/geoserver/rest/workspaces/sf.xml</a>, nurc @ <a href=http://localhost:8082/geoserver/rest/workspaces/nurc.xml>http://localhost:8082/geoserver/rest/workspaces/nurc.xml</a>] </p> </blockquote> </blockquote> </blockquote> <p>L'installation ainsi que la prise en main de gsconfig sont réellement très rapides. Quel plaisir de pouvoir s'amuser avec geoserver tout en utilisant python ! Mais bon, c'est décidé cette année je me mets au java...</p> <hr> <h2 id=auteur>Auteur<a class=headerlink href=#auteur title="Permanent link">#</a></h2> <p><img alt="Portait de GeoTribu" class=img-rdp-news-thumb src=https://cdn.geotribu.fr/img/internal/charte/geotribu_logo_64x64.png> <strong>GeoTribu</strong></p> <p>Toute l'actualité de la géomatique Open Source ! Mais aussi des tutoriels, des billets de blog, des tests et surtout une bonne humeur géographique !</p></div> </div> </div> <hr> <footer class=container> <center><span class=copyleft>&copy;</span> Geotribu</center> <center>Documentation built with <a href=http://www.mkdocs.org>MkDocs</a> and <a href=http://kristopolous.github.io/BOOTSTRA.386>BOOTSTRA.386</a>.</center> </footer> <script src=../../../../../../theme/assets/javascripts/extra.js></script> <script src=https://cdn.jsdelivr.net/npm/wa-mediabox@1.0.1/dist/wa-mediabox.min.js></script> <script src=https://unpkg.com/mermaid@8.6.4/dist/mermaid.min.js></script> <script src=../../../../../../search/main.js></script> </body> </html>