<!DOCTYPE html><html lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=description content="Site indépendant de veille sur la géomatique libre et open source. Articles, tutoriels et revues de presse (#GeoRDP) sur l'information géographique, les SIG, la cartographie, la représentation des données..."><meta name=author content=Geotribu><link href=https://static.geotribu.fr/articles/2011/art_2011-01-19/ rel=canonical><link rel="shortcut icon" href=../../../img/favicon.ico><title>Documenter vos bases de données : exemple avec OpenStreetMap - Geotribu</title><link href=../../../css/bootstrap.min.css rel=stylesheet><link href=../../../css/font-awesome.min.css rel=stylesheet><link href=../../../css/bootstrap-theme.min.css rel=stylesheet><link href=../../../../../../theme/assets/stylesheets/extra.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/wa-mediabox@1.0.1/dist/wa-mediabox.min.css rel=stylesheet><!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.3/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]--><script src=../../../js/jquery-1.10.2.min.js></script><script src=../../../js/bootstrap.min.js></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'None', 'auto');
            ga('send', 'pageview');
        </script></head> <body> <div class="navbar navbar-default navbar-fixed-top" role=navigation> <div class=container> <div class=navbar-header> <button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=../../..>Geotribu</a> </div> <div class="navbar-collapse collapse"> <ul class="nav navbar-nav"> <li> <a href=../../..>&#127968; Accueil</a> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>Revues de presse <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../..>2021</a> </li> <li> <a href=../../..>2020</a> </li> <li> <a href=../../..>2017</a> </li> <li> <a href=../../..>2016</a> </li> <li> <a href=../../..>2015</a> </li> <li> <a href=../../..>2014</a> </li> <li> <a href=../../..>2013</a> </li> <li> <a href=../../..>2012</a> </li> <li> <a href=../../..>2011</a> </li> <li> <a href=../../..>2010</a> </li> </ul> </li> <li class="dropdown active"> <a href=# class=dropdown-toggle data-toggle=dropdown>Articles <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../..>2021</a> </li> <li> <a href=../../..>2020</a> </li> <li> <a href=../../..>2015</a> </li> <li> <a href=../../..>2014</a> </li> <li> <a href=../../..>2013</a> </li> <li> <a href=../../..>2012</a> </li> <li class=active> <a href=../../..>2011</a> </li> <li> <a href=../../..>2010</a> </li> <li> <a href=../../..>2009</a> </li> <li> <a href=../../..>2008</a> </li> </ul> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>Contribuer <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../contribuer/introduction/ >Contribuer à Geotribu</a> </li> <li> <a href=../../../contribuer/requirements/ >Prérequis pour la contribution</a> </li> <li> <a href=../../../contribuer/contribution_guide/ >Guide de contribution</a> </li> <li> <a href=../../..>Editer le contenu</a> </li> <li> <a href=../../..>Générer le site web</a> </li> <li> <a href=../../..>Guides de rédaction</a> </li> <li> <a href=../../..>Archives</a> </li> </ul> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>A propos <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../team/ >L'équipe Geotribu</a> </li> <li> <a href=../../../team/acha/ >Aurélien Chaumet</a> </li> <li> <a href=../../../team/avdc/ >Arnaud Vandecasteele</a> </li> <li> <a href=../../../team/avha/ >Adrien Van Hamme</a> </li> <li> <a href=../../../team/edel/ >Etienne Delay</a> </li> <li> <a href=../../../team/fbor/ >Florian Boret</a> </li> <li> <a href=../../../team/fgob/ >Fabien Goblet</a> </li> <li> <a href=../../../team/gdbo/ >Guillaume de Boyer</a> </li> <li> <a href=../../../team/jmou/ >Julien Moura</a> </li> <li> <a href=../../../team/jory/ >Jérémie Ory</a> </li> <li> <a href=../../../team/jpie/ >Julie Pierson</a> </li> <li> <a href=../../../team/mraj/ >Mathieu Rajerison</a> </li> <li> <a href=../../../team/pver/ >Pierre Vernier</a> </li> <li> <a href=../../../team/rbov/ >Rémi Bovard</a> </li> <li> <a href=../../../team/rqui/ >Rodolphe Quiédeville</a> </li> <li> <a href=../../../team/tgra/ >Thomas Gratier</a> </li> <li> <a href=../../..>Archives</a> </li> </ul> </li> </ul> <ul class="nav navbar-nav navbar-right"> <li> <a href=../art_2011-01-24/ rel=next> <i class="fa fa-arrow-left"></i> Previous </a> </li> <li> <a href=../art_2011-01-18/ rel=prev> Next <i class="fa fa-arrow-right"></i> </a> </li> <li> <a href=https://github.com/geotribu/website/ > geotribu/website </a> </li> </ul> </div> </div> </div> <div class=container> <div class=row> <div class=col-md-3><div class="bs-sidebar hidden-print affix well" role=complementary> <ul class="nav bs-sidenav"> <li class="main active"><a href=#documenter-vos-bases-de-donnees-exemple-avec-openstreetmap>Documenter vos bases de données : exemple avec OpenStreetMap</a></li> <li><a href=#installer-loutil>Installer l'outil</a></li> <li><a href=#commercial>Commercial</a></li> <li><a href=#sources>Sources</a></li> <li class="main "><a href=#deb-src-httparchivecanonicalcomubuntu-lucid-partner>deb-src http://archive.canonical.com/ubuntu lucid partner</a></li> <li><a href=#_2>#####################################################################</a></li> <li><a href=#utilisez-loutil-pour-faire-votre-beau-schema>Utilisez l'outil pour faire votre "beau schéma"</a></li> <li><a href=#exercices-complementaires>Exercices complémentaires</a></li> <li><a href=#auteur>Auteur</a></li> </ul> </div></div> <div class=col-md-9 role=main> <h1 id=documenter-vos-bases-de-donnees-exemple-avec-openstreetmap>Documenter vos bases de données : exemple avec OpenStreetMap<a class=headerlink href=#documenter-vos-bases-de-donnees-exemple-avec-openstreetmap title="Permanent link">#</a></h1> <p>:calendar: Date de publication initiale : 19 janvier 2011</p> <p><strong>Mots-clés :</strong> OpenStreetMap | Database | PostgreSQL</p> <p>Dans un précédent tutoriel portant sur OpenStreetMap <a href=http://www.geotribu.net/node/262>Créez votre propre serveur OpenStreetMap sous Ubuntu 10.04 Lucid Lynx</a>, nous vous faisions importer des données dans la base de données PostgreSQL mais sans vous apprendre à les explorer rapidement. </p> <p>Nous vous proposons pour cela de découvrir comment être rapidement en mesure de comprendre la structure d'une base de données existantes en la modélisant par l'intermédiaire d'un outil tiers.<br> L'outil retenu pour cela est SchemaSpy. Vous allez nous dire alors d'arrêter car vous avez déjà lu le tutoriel <a href=http://www.geotribu.net/node/248>Modélisation d'une base de données avec SQL Power Architect</a><br> Il n'en est rien car cet outil n'a pas pour but de modéliser une base de données mais plutôt de la documenter en analysant les tables les relations, en créant un dictionnaire des données et en vous fournissant des conseils d'optimisation. </p> <p>Ainsi, vous pourrez produire un rapport consultable/partageable sur Internet en quelques minutes.<br> Evidemment, cette méthode bien qu'appliquée à la base de OpenStreetMap est applicable à l'ensemble des bases de données que vous rencontrerez à partir du moment où elles possèdent un pilote JDBC (basé sur Java).</p> <p>Après cette longue introduction, commençons!!</p> <h4 id=installer-loutil>Installer l'outil<a class=headerlink href=#installer-loutil title="Permanent link">#</a></h4> <p>L'outil étant basé sur Java et Graphviz (une bibliothèque graphique), il faut les installer.</p> <p><strong>Sous Windows,</strong></p> <ol> <li>Installez GraphViz en allant sur <a href=http://www.graphviz.org/ >http://www.graphviz.org/</a> et en allant dans la section "Download".<br> Double-cliquez sur le fichier et faites des "suivant-suivant" pour installer<br> Si vous êtes sous Vista, même en étant administrateur, il est conseillé d'ouvrir la fenêtre de commandes, de vous déplacer dans le répertoire contenant votre fichier et faire un<br> msiexec /a graphviz-x.xx.msi</li> <li>Vérifiez que vous n'avez pas déjà Java en allant sur Démarrer &gt; Tous les Programmes &gt; Accessoires &gt; Invite de commande Tapez</li> </ol> <p>java -version</p> <p>Si vous avez un retour mentionnant java version 1.6.x.x ou 1.5.x.x, vous pouvez sautez l'étape suivante</p> <ol> <li>Installez Java en allant le récupérer sur <a href=http://www.java.com/fr/download/manual.jsp>http://www.java.com/fr/download/manual.jsp</a><br> Comme pour GraphViz, double-cliquez sur le fichier reçu, suivez les instructions et c'est OK</li> <li>En introduction, nous avions fait référence à des drivers JDBC, il faut les récupérer sur <a href=http://jdbc.postgresql.org/download.html>http://jdbc.postgresql.org/download.html</a><br> Il faut si votre version de java est 1.5.x.x prendre des pilotes de la colonnes JDBC3 correspondant à votre version de PostgreSQL.<br> Si vous avez une version 1.6.x.x (ce qui est le cas avec l'installation de l'étape 3 si vous n'aviez pas déjà java antérieurement), il faudra choisir un pilote JDBC4 correspondant à PostgreSQL</li> <li>Récupérez enfin SchemaSpy en allant sur <a href=http://schemaspy.sourceforge.net/ >http://schemaspy.sourceforge.net/</a> ou par le <a href=http://sourceforge.net/projects/schemaspy/files/schemaspy/SchemaSpy%205.0.0/schemaSpy_5.0.0.jar/download>lien direct</a></li> <li>Rajouter à la fin de la variable d'environnement PATH, le chemin vers dot.exe, c'est à dire C:\Program Files\Graphviz2.26.3\bin (ou C:\Program Files (x86)\Graphviz2.26.3\bin pour une machine avec un windows 64 bits) précédé d'un point virgule qui joue le rôle de séparateur. <strong>Sous Ubuntu Linux 10.04</strong></li> </ol> <p>Attention, inutile de faire les étapes 1 et 2 si vous venez du tutoriel de OpenStreetMap (vous avez déjà fait ces manipulations pour installer Osmosis)</p> <ol> <li>Testez la présence de Java<br> java -version</li> <li>Sinon, faire : sudo nano /etc/apt/sources.list</li> </ol> <p>puis coller à la fin : </p> <h6 id=_1>#####################################################################<a class=headerlink href=#_1 title="Permanent link">#</a></h6> <h2 id=commercial>Commercial<a class=headerlink href=#commercial title="Permanent link">#</a></h2> <p>deb <a href=http://archive.canonical.com/ubuntu>http://archive.canonical.com/ubuntu</a> lucid partner</p> <h2 id=sources>Sources<a class=headerlink href=#sources title="Permanent link">#</a></h2> <h1 id=deb-src-httparchivecanonicalcomubuntu-lucid-partner>deb-src <a href=http://archive.canonical.com/ubuntu>http://archive.canonical.com/ubuntu</a> lucid partner<a class=headerlink href=#deb-src-httparchivecanonicalcomubuntu-lucid-partner title="Permanent link">#</a></h1> <h6 id=_2>#####################################################################<a class=headerlink href=#_2 title="Permanent link">#</a></h6> <p>puis fermer avec ctrl + O.</p> <p>Ensuite, rechargez le gestionnaire de package et installer Java avec :</p> <p>sudo apt-get update<br> sudo apt-get upgrade<br> sudo apt-get install sun-java6-jre </p> <ol> <li>Installez GraphViz<br> sudo apt-get install graphviz</li> <li>En introduction, nous avions fait référence à des drivers JDBC, il faut les récupérer sur <a href=http://jdbc.postgresql.org/download.html>http://jdbc.postgresql.org/download.html</a><br> Il faut si votre version de java est 1.5.x.x prendre des pilotes de la colonnes JDBC3 correspondant à votre version de PostgreSQL.<br> Si vous avez une version 1.6.x.x (ce qui est le cas avec l'installation de l'étape 3 si vous n'aviez pas déjà java antérieurement), il faudra choisir un pilote JDBC4 correspondant à PostgreSQL</li> <li>Récupérez enfin SchemaSpy en allant sur <a href=http://schemaspy.sourceforge.net/ >http://schemaspy.sourceforge.net/</a> ou par le <a href=http://sourceforge.net/projects/schemaspy/files/schemaspy/SchemaSpy%205.0.0/schemaSpy_5.0.0.jar/download>lien direct</a></li> </ol> <h4 id=utilisez-loutil-pour-faire-votre-beau-schema>Utilisez l'outil pour faire votre "beau schéma"<a class=headerlink href=#utilisez-loutil-pour-faire-votre-beau-schema title="Permanent link">#</a></h4> <p>Le plus long était l'installation. </p> <p>Il vous suffit de suivre le modèle ci-dessous et de remplacer les variables encadrées par &lt;...&gt; par vos propres paramètres :...</p> <p>java -jar -cp -t pgsql -db -host -u -p<br> -s -o </p> <p>Un cas concret avec l'utilisateur de base de données "utilisateurbase" avec son mot de passe "motdepasse" connécté en local sur une base osm et envoyant le résultat dans le répertoire osm_psql_doc .</p> <p><strong>Sous Windows</strong></p> <p>java -jar C:/downloads/schemaSpy_5.0.0.jar -cp C:/download/postgresql-9.0-801.jdbc4.jar -t pgsql -db osm -host localhost -u utilisateurbase -p motdepasse -s public -o osm_psql_doc </p> <p><strong>Sous Linux</strong></p> <p>java -jar /home/monutilisateur/download/schemaSpy_5.0.0.jar -cp /home/monutilisateur/download/postgresql-9.0-801.jdbc4.jar -t pgsql -db osm -host localhost -u utilisateurbase -p motdepasse -s public -o osm_psql_doc </p> <p>Ouvrir avec votre navigateur le fichier index.html du répertoire osm_psql_doc et vous avez ainsi documenté la structure de la base OSM importée dans PostgreSQL. </p> <p>Une version hébergée datant du 13 janvier 2010 est disponible en suivant le <a href=http://osm.analysesig.net/osm2pgsql_schema>lien</a>. </p> <p>Vous avez vu ainsi comment documenter votre base de données postgreSQL OpenStreetMap mais vous auriez pu faire de même avec un autre base postgreSQL ou une base MySql ou sqlite. Vous pouvez aussi installer une interface graphique plutôt que de faire de la ligne de commande. </p> <p>Allez sur le <a href=http://schemaspy.sourceforge.net/ >site officiel pour découvrir comment</a> !</p> <h4 id=exercices-complementaires>Exercices complémentaires<a class=headerlink href=#exercices-complementaires title="Permanent link">#</a></h4> <p>Nous vous proposons d'appliquer la même méthode à l'exemple de la base obtenue dans le tutoriel <a href=http://www.geotribu.net/node/248>Modélisation d'une base de données avec SQL Power Architect</a> très intéressant car il y a beaucoup de relations entre les tables. </p> <p>Nous vous conseillons aussi croiser le nom des colonnes dans le schéma obtenu, avec la liste des objets qui constituent la carte <a href=http://wiki.openstreetmap.org/wiki/FR:Map_Features>http://wiki.openstreetmap.org/wiki/FR:Map_Features</a><br> Vous trouverez une correspondance flagrante entre les clés et les noms des champs dans certaines tables de la base de donnée. </p> <p>Ce dernier exercice complémentaire met d'ailleurs en évidence un manque en terme d'analyse depuis un modèle de base de données , on ne voit que la structure et on oublie les occurrences pour les champs. Il y a donc un grand intérêt à explorer la donnée et sa documentation lorsqu'elle existe.</p> <hr> <h2 id=auteur>Auteur<a class=headerlink href=#auteur title="Permanent link">#</a></h2> <p><img alt="Portait de GeoTribu" class=img-rdp-news-thumb src=https://cdn.geotribu.fr/img/internal/charte/geotribu_logo_64x64.png> <strong>GeoTribu</strong></p> <p>Toute l'actualité de la géomatique Open Source ! Mais aussi des tutoriels, des billets de blog, des tests et surtout une bonne humeur géographique !</p></div> </div> </div> <hr> <footer class=container> <center><span class=copyleft>&copy;</span> Geotribu</center> <center>Documentation built with <a href=http://www.mkdocs.org>MkDocs</a> and <a href=http://kristopolous.github.io/BOOTSTRA.386>BOOTSTRA.386</a>.</center> </footer> <script src=../../../../../../theme/assets/javascripts/extra.js></script> <script src=https://cdn.jsdelivr.net/npm/wa-mediabox@1.0.1/dist/wa-mediabox.min.js></script> <script src=https://unpkg.com/mermaid@8.6.4/dist/mermaid.min.js></script> <script src=../../../../../../search/main.js></script> </body> </html>